<!doctype html><html lang="en"
  >
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>关于musicplayer - Euraxluo Blog</title><link rel="apple-touch-icon" href="https://euraxluo.gitee.io/blog/images/icons/icon-180x180.png" sizes="180x180">
<link rel="icon" href="https://euraxluo.gitee.io/blog/images/icons/icon-32x32.png" sizes="32x32" type="image/png">
<link rel="icon" href="https://euraxluo.gitee.io/blog/images/icons/icon-16x16.png" sizes="16x16" type="image/png">
<link rel="icon" href="https://euraxluo.gitee.io/blog/images/icons/favicon.ico">
<link rel="manifest" href="https://euraxluo.gitee.io/blog/manifest.json">
<meta name="keywords" content="" />
<meta name="description" content="关于musicplayer" /><meta itemprop="name" content="关于musicplayer">
<meta itemprop="description" content="关于musicplayer">
<meta itemprop="datePublished" content="2019-02-21T00:00:00+00:00" />
<meta itemprop="dateModified" content="2019-02-21T00:00:00+00:00" />
<meta itemprop="wordCount" content="2008">



<meta itemprop="keywords" content="notes," />
<meta property="og:title" content="关于musicplayer" />
<meta property="og:description" content="关于musicplayer" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://euraxluo.gitee.io/blog/posts/note/%E5%85%B3%E4%BA%8Emusicplayer/" />
<meta property="article:published_time" content="2019-02-21T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-02-21T00:00:00+00:00" /><meta property="og:see_also" content="https://euraxluo.gitee.io/blog/posts/note/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/" /><meta property="og:see_also" content="https://euraxluo.gitee.io/blog/posts/note/c&#43;&#43;-%E5%B0%8F%E8%AE%B0/" /><meta property="og:see_also" content="https://euraxluo.gitee.io/blog/posts/note/io%E6%A8%A1%E5%9E%8B%E5%B0%8F%E8%AE%B0/" /><meta property="og:see_also" content="https://euraxluo.gitee.io/blog/posts/note/java%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/" /><meta property="og:see_also" content="https://euraxluo.gitee.io/blog/posts/note/%E5%A4%8D%E6%9D%82%E7%B3%BB%E7%BB%9F/" /><meta property="og:see_also" content="https://euraxluo.gitee.io/blog/posts/note/rust%E5%AD%A6%E4%B9%A0/" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="关于musicplayer"/>
<meta name="twitter:description" content="关于musicplayer"/>
<link rel="stylesheet" href="https://euraxluo.gitee.io/blog/css/main.min.28a3ca343dd0a7bd1957907fcd87aef64aaaa4ae30eb486ada4e888fd95ae91b.css" integrity="sha256-KKPKND3Qp70ZV5B/zYeu9kqqpK4w60hq2k6Ij9la6Rs=" crossorigin="anonymous"><link rel="stylesheet" href="https://euraxluo.gitee.io/blog/css/katex.min.52bcb5669e86f59157424ba25853a6b20465391634a4ab5d7d42563c713ea165.css" integrity="sha256-Ury1Zp6G9ZFXQkuiWFOmsgRlORY0pKtdfUJWPHE&#43;oWU=" crossorigin="anonymous">
<link rel="stylesheet" href="https://euraxluo.gitee.io/blog/css/viewer.min.f66ccd366c47e7fdadd4ff99e528f941dfebc6dfa1b7abec38803f94064139c1.css" integrity="sha256-9mzNNmxH5/2t1P&#43;Z5Sj5Qd/rxt&#43;ht6vsOIA/lAZBOcE=" crossorigin="anonymous"></head>
  <body><script>const items=['mode','palette'];items.forEach(function(key){const value=localStorage.getItem('hbs-'+key);if(value){document.body.parentElement.setAttribute('data-'+key,value);}});</script><header><nav class="navbar top-app-bar top-app-bar-expand-lg fixed-top">
  <div class="container-fluid">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <i class="fas fa-bars"></i>
    </button><a class="navbar-brand me-3" href="https://euraxluo.gitee.io/blog"><img class="logo" alt="Logo" src="https://gitee.com/Euraxluo/images/raw/master/picgo/profile.png" loading="lazy"
  
   />
Euraxluo
    </a>
    <button class="navbar-social-share" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasSocialShare"
  aria-controls="offcanvasSocialShare" aria-label="Toggle social share">
  <i class="fas fa-share-alt"></i>
</button>

<div class="offcanvas offcanvas-bottom surface" tabindex="-1" id="offcanvasSocialShare" aria-labelledby="offcanvasSocialShare">
  <div class="offcanvas-header">
    <h3 class="offcanvas-title">Share</h3>
    <button type="button" class="btn btn-sm btn-outline-primary" data-bs-dismiss="offcanvas" aria-label="Close">
      <i class="fas fa-times"></i>
    </button>
  </div>
  <div class="offcanvas-body">
    <a class="btn btn-sm btn-outline-primary social-share-button" rel="noopener noreferrer" aria-label="Twitter Share Button"
      target="_blank" href="https://twitter.com/intent/tweet?title=%e5%85%b3%e4%ba%8emusicplayer&url=https%3a%2f%2feuraxluo.gitee.io%2fblog%2fposts%2fnote%2f%25E5%2585%25B3%25E4%25BA%258Emusicplayer%2f">
      <i class="fab fa-fw fa-twitter"></i> Twitter
    </a>
    <a class="btn btn-sm btn-outline-primary social-share-button" rel="noopener noreferrer" aria-label="Facebook Share Button"
      target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2feuraxluo.gitee.io%2fblog%2fposts%2fnote%2f%25E5%2585%25B3%25E4%25BA%258Emusicplayer%2f">
      <i class="fab fa-fw fa-facebook-f"></i> Facebook
    </a>
  </div>
</div>
    <button class="navbar-settings" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasSettings"
  aria-controls="offcanvasSettings" aria-label="Toggle settings">
  <i class="fas fa-ellipsis-v"></i>
</button>

<div class="offcanvas offcanvas-end surface h-100" tabindex="-1" id="offcanvasSettings" aria-labelledby="offcanvasSettings">
  <div class="offcanvas-header">
    <h3 class="offcanvas-title">Settings</h3>
    <button type="button" class="btn btn-sm btn-outline-primary" data-bs-dismiss="offcanvas" aria-label="Close">
      <i class="fas fa-times"></i>
    </button>
  </div>
  <div class="offcanvas-body d-flex flex-column">

<section class="setting">
  <form class="row">
    <div class="col-auto">
      <label><i class="fas fa-fw fa-adjust"></i> Mode</label>
    </div>
    <div class="col-auto ms-auto">
      <div class="form-check form-switch">
        <input class="form-check-input" type="checkbox" id="modeSwitcher">
      </div>
    </div>
  </form>
</section>

<section class="setting">
  <form class="font-size-switcher-form row">
    <div class="col-auto">
      <label for="fontSize" class="form-label"><i class="fas fa-fw fa-font"></i> Font Size</label>
    </div>
    <div class="col-auto ms-auto">
      <input type="range" class="form-range" min="-2" max="2" id="fontSize">
    </div>
  </form>
</section>


<section class="setting palettes">
  <form class="row">
    <div class="col-auto">
      <label><i class="fas fa-fw fa-palette"></i> Palette</label>
    </div>
    <div class="col-auto ms-auto">
      <a id="btnPalette" class="btn btn-sm btn-outline-primary" role="button" aria-label="palettePicker">
        <i class="fas fa-eye-dropper"></i>
      </a>
    </div>
  </form>
  <div class="mt-2 d-flex visually-hidden" id="palettePicker"><button type="button" id="palette-blue" aria-label="Blue"
        class="btn btn-sm palette" data-palette="blue">
      </button><button type="button" id="palette-blue-gray" aria-label="Blue Gray"
        class="btn btn-sm palette" data-palette="blue-gray">
      </button><button type="button" id="palette-brown" aria-label="Brown"
        class="btn btn-sm palette" data-palette="brown">
      </button><button type="button" id="palette-cyan" aria-label="Cyan"
        class="btn btn-sm palette" data-palette="cyan">
      </button><button type="button" id="palette-green" aria-label="Green"
        class="btn btn-sm palette" data-palette="green">
      </button><button type="button" id="palette-indigo" aria-label="Indigo"
        class="btn btn-sm palette" data-palette="indigo">
      </button><button type="button" id="palette-orange" aria-label="Orange"
        class="btn btn-sm palette" data-palette="orange">
      </button><button type="button" id="palette-pink" aria-label="Pink"
        class="btn btn-sm palette" data-palette="pink">
      </button><button type="button" id="palette-purple" aria-label="Purple"
        class="btn btn-sm palette" data-palette="purple">
      </button><button type="button" id="palette-red" aria-label="Red"
        class="btn btn-sm palette" data-palette="red">
      </button><button type="button" id="palette-teal" aria-label="Teal"
        class="btn btn-sm palette" data-palette="teal">
      </button><button type="button" id="palette-yellow" aria-label="Yellow"
        class="btn btn-sm palette" data-palette="yellow">
      </button></div>
</section>
<section class="setting actions d-flex justify-content-center mt-auto">
  <a role="button" class="action action-reload-page">
    <span class="action-icon"><i class="fas fa-2x fa-redo-alt"></i></span> Reload
  </a>
  <a role="button" class="action action-copy-url">
    <span class="action-icon"><i class="fas fa-2x fa-link"></i></span> Copy URL
  </a>
</section>

</div>
</div>

    <div class="collapse navbar-collapse" tabindex="-1" id="navbarSupportedContent" aria-labelledby="navbarSupportedContent">
      <form class="search-bar my-1" action="https://euraxluo.gitee.io/blog/search">
  <div class="input-group input-group-sm">
    <span class="btn btn-search disabled position-absolute left-0"><i class="fas fa-fw fa-search"></i></span>
    <input class="form-control rounded-pill" name="q" type="search" aria-label="Search">
  </div>
</form>
      <ul class="navbar-nav ms-auto"><li class="nav-item">
          <a class="nav-link" href="https://euraxluo.gitee.io/blog/archives">
            <i class="fas fa-fw fa-file-archive"></i>timeline
          </a>
        </li><li class="nav-item">
          <a class="nav-link" href="https://euraxluo.gitee.io/blog/categories">
            <i class="fas fa-fw fa-folder"></i>category
          </a>
        </li><li class="nav-item">
          <a class="nav-link" href="https://euraxluo.gitee.io/blog/tags">
            <i class="fas fa-fw fa-tags"></i>tags
          </a>
        </li><li class="nav-item">
          <a class="nav-link" href="https://euraxluo.gitee.io/blog/series">
            <i class="fas fa-fw fa-columns"></i>series
          </a>
        </li><li class="nav-item dropdown">
          <a class="nav-link" id="navbarDropdownRepos" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="fab fa-fw fa-github"></i>Repos
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdownRepos"><li>
              <a class="dropdown-item"
                href="https://github.com/Euraxluo" target="_blank" rel="noopener noreferrer">
                <i class="fab fa-fw fa-github"></i>Euraxluo
              </a>
            </li><li>
              <a class="dropdown-item"
                href="https://github.com/Euraxluo/fastgrpc" target="_blank" rel="noopener noreferrer">
                <i class="fab fa-fw fa-github"></i>fastgrpc
              </a>
            </li><li>
              <a class="dropdown-item"
                href="https://github.com/Euraxluo/ProjectPractice" target="_blank" rel="noopener noreferrer">
                <i class="fab fa-fw fa-github"></i>ProjectPractice
              </a>
            </li><li>
              <a class="dropdown-item"
                href="https://github.com/Euraxluo/pyantv" target="_blank" rel="noopener noreferrer">
                <i class="fab fa-fw fa-github"></i>pyantv
              </a>
            </li><li>
              <a class="dropdown-item"
                href="https://github.com/Euraxluo/simple_pyvm" target="_blank" rel="noopener noreferrer">
                <i class="fab fa-fw fa-github"></i>simple-pythonvm
              </a>
            </li><li>
              <a class="dropdown-item"
                href="https://github.com/Euraxluo/verb" target="_blank" rel="noopener noreferrer">
                <i class="fab fa-fw fa-github"></i>verb
              </a>
            </li></ul>
        </li></ul>
    </div>
  </div>
</nav>
</header>
<main role="main" class="container-fluid">
      <div class="row content">
<div class="col-lg-8">
  <div class="container"><article class="row card component mb-4 post"><div class="post-panel-wrapper">
  <div class="d-flex flex-column component rounded post-panel">
    
    <a id="sidebarToggler" class="action d-none d-lg-block" role="button" title="Sidebar toggler">
  <i class="fas fa-fw fa-expand-alt" data-fa-transform="rotate-45"></i>
</a>
  
    

    <a class="action btn-reward" role="button" data-bs-toggle="modal" data-bs-target="#rewardModal" title="Buy me a coffee">
  <i class="fas fa-fw fa-coffee"></i>
</a>
    <a class="action" href="#post-copyright" role="button" aria-label="Copyright" title="Copyright">
  <i class="fas fa-fw fa-copyright"></i>
</a>
    <a class="action" href="#post-comments" role="button" aria-label="Comments" title="Comments">
  <i class="fas fa-fw fa-comments"></i>
</a>
    <a class="action" data-bs-toggle="offcanvas" href="#offcanvasTOC" aria-controls="offcanvasTOC" role="button" title="Table of contents">
  <i class="fas fa-fw fa-list-alt"></i>
</a>
    
  </div>
</div>
<div class="card-header ">
    <h1 class="card-title post-title">关于musicplayer
</h1>
  </div>
  <div class="card-body"><div class="post-meta">
  <span class="post-date" title="created on 2019-02-21 08:00:00 &#43;0800 CST.">
    2019-02-21
  </span><span class="post-reading-time">
    10 min read
  </span><span class="post-taxonomies"><a href="https://euraxluo.gitee.io/blog/categories/notes/" class="badge rounded-pill post-taxonomy">notes</a><a href="https://euraxluo.gitee.io/blog/series/notes/" class="badge rounded-pill post-taxonomy">notes</a><a href="https://euraxluo.gitee.io/blog/tags/notes/" class="badge rounded-pill post-taxonomy">notes</a></span>
</div>
<div class="offcanvas offcanvas-end surface h-100" tabindex="-1" id="offcanvasTOC" aria-labelledby="offcanvasTOCLabel">
  <div class="offcanvas-header">
    <h2 class="offcanvas-title" id="offcanvasTOCLabel">Table Of Contents</h5>
      <button type="button" class="btn btn-sm btn-outline-primary" data-bs-dismiss="offcanvas" aria-label="Close">
        <i class="fas fa-times"></i>
      </button>
  </div>
  <div class="offcanvas-body">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#关于musicplayer">关于musicplayer</a>
      <ul>
        <li><a href="#首先给权限">首先给权限</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div><div class="post-content mb-3"><h2 id="关于musicplayer">关于musicplayer<a class="anchor ms-1" href="#关于musicplayer"><i class="fas fa-link"></i></a></h2>
<h3 id="首先给权限">首先给权限<a class="anchor ms-1" href="#首先给权限"><i class="fas fa-link"></i></a></h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">	<span style="color:#75715e">&lt;!-- 网络权限 --&gt;</span>
    <span style="color:#f92672">&lt;uses-permission</span> <span style="color:#a6e22e">android:name=</span><span style="color:#e6db74">&#34;android.permission.INTERNET&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;uses-permission</span> <span style="color:#a6e22e">android:name=</span><span style="color:#e6db74">&#34;android.permission.READ_EXTERNAL_STORAGE&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#75715e">&lt;!-- 向SD卡写入数据权限 --&gt;</span>
    <span style="color:#f92672">&lt;uses-permission</span> <span style="color:#a6e22e">android:name=</span><span style="color:#e6db74">&#34;android.permission.WRITE_EXTERNAL_STORAGE&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#75715e">&lt;!-- 在SD卡中创建与删除文件权限 --&gt;</span>
	<span style="color:#75715e">&lt;!-- 扫描数据库的权限 --&gt;</span>
    <span style="color:#f92672">&lt;uses-permission</span> 
            <span style="color:#a6e22e">android:name=</span><span style="color:#e6db74">&#34;android.permission.MOUNT_UNMOUNT_FILESYSTEMS&#34;</span>
            <span style="color:#a6e22e">tools:ignore=</span><span style="color:#e6db74">&#34;ProtectedPermissions&#34;</span><span style="color:#f92672">/&gt;</span>
</code></pre></div><p>包含ListView的布局文件</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
<span style="color:#f92672">&lt;LinearLayout</span>
        <span style="color:#a6e22e">xmlns:android=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res/android&#34;</span>
        <span style="color:#a6e22e">xmlns:tools=</span><span style="color:#e6db74">&#34;http://schemas.android.com/tools&#34;</span>
        <span style="color:#a6e22e">xmlns:app=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
        <span style="color:#a6e22e">android:orientation=</span><span style="color:#e6db74">&#34;vertical&#34;</span>
        <span style="color:#a6e22e">android:layout_gravity=</span><span style="color:#e6db74">&#34;center&#34;</span>
        <span style="color:#a6e22e">tools:context=</span><span style="color:#e6db74">&#34;.MainActivity&#34;</span><span style="color:#f92672">&gt;</span>

    <span style="color:#f92672">&lt;LinearLayout</span>
            <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
            <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;400dp&#34;</span>
            <span style="color:#a6e22e">android:orientation=</span><span style="color:#e6db74">&#34;vertical&#34;</span><span style="color:#f92672">&gt;</span>

        <span style="color:#f92672">&lt;ListView</span>
                <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/lv1&#34;</span>
                <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
                <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span><span style="color:#f92672">&gt;&lt;/ListView&gt;</span>
    <span style="color:#f92672">&lt;/LinearLayout&gt;</span>


    <span style="color:#f92672">&lt;SeekBar</span>
            <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/sb&#34;</span>
            <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
            <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;30dp&#34;</span>
            <span style="color:#a6e22e">android:maxHeight=</span><span style="color:#e6db74">&#34;2dp&#34;</span>
            <span style="color:#a6e22e">android:minHeight=</span><span style="color:#e6db74">&#34;2dp&#34;</span>
            <span style="color:#a6e22e">android:paddingBottom=</span><span style="color:#e6db74">&#34;3dp&#34;</span>
            <span style="color:#a6e22e">android:paddingLeft=</span><span style="color:#e6db74">&#34;12dp&#34;</span>
            <span style="color:#a6e22e">android:max=</span><span style="color:#e6db74">&#34;200&#34;</span>
            <span style="color:#a6e22e">android:paddingRight=</span><span style="color:#e6db74">&#34;12dp&#34;</span>
            <span style="color:#a6e22e">android:paddingTop=</span><span style="color:#e6db74">&#34;3dp&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;TextView</span>
            <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/tv1&#34;</span>
            <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
            <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span> <span style="color:#f92672">/&gt;</span>

    <span style="color:#f92672">&lt;LinearLayout</span>
            <span style="color:#a6e22e">android:orientation=</span><span style="color:#e6db74">&#34;horizontal&#34;</span>
            <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
            <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;cn.study.euraxluo.androidtup.CircleImageView</span>
                <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/imageView&#34;</span>
                <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;70dp&#34;</span>
                <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;70dp&#34;</span>
                <span style="color:#a6e22e">android:scaleType=</span><span style="color:#e6db74">&#34;centerCrop&#34;</span>
                <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;Button</span>
                <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/btn_last&#34;</span>
                <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;70dp&#34;</span>
                <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
                <span style="color:#a6e22e">android:text=</span><span style="color:#e6db74">&#34;@string/btn_last&#34;</span><span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;Button</span>
                <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/btn_star&#34;</span>
                <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;70dp&#34;</span>
                <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
                <span style="color:#a6e22e">android:text=</span><span style="color:#e6db74">&#34;@string/btn_star&#34;</span><span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;Button</span>
                <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/btn_next&#34;</span>
                <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;70dp&#34;</span>
                <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
                <span style="color:#a6e22e">android:text=</span><span style="color:#e6db74">&#34;@string/btn_next&#34;</span><span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;Button</span>
                <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/btn_stop&#34;</span>
                <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;70dp&#34;</span>
                <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
                <span style="color:#a6e22e">android:text=</span><span style="color:#e6db74">&#34;@string/btn_stop&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/LinearLayout&gt;</span>
<span style="color:#f92672">&lt;/LinearLayout&gt;</span>
</code></pre></div><p>MainActivity.java</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MainActivity</span> <span style="color:#66d9ef">extends</span> AppCompatActivity <span style="color:#66d9ef">implements</span> Runnable <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String TAG <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;MainActivity&#34;</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> flag <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span><span style="color:#75715e">//设置一个标志，供点击“开始/暂停”按钮使用
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> Button btnStart<span style="color:#f92672">,</span> btnStop<span style="color:#f92672">,</span> btnNext<span style="color:#f92672">,</span> btnLast<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> TextView txtInfo<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> ListView listView<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> SeekBar seekBar<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> MusicService musicService<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> Handler handler<span style="color:#f92672">;</span><span style="color:#75715e">// 处理改变进度条事件
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">int</span> UPDATE <span style="color:#f92672">=</span> 0x101<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">boolean</span> autoChange<span style="color:#f92672">,</span> manulChange<span style="color:#f92672">;</span><span style="color:#75715e">// 判断是进度条是自动改变还是手动改变
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">boolean</span> isPause<span style="color:#f92672">;</span><span style="color:#75715e">// 判断是从暂停中恢复还是重新播
</span><span style="color:#75715e"></span>
    AudioUtils audioUtils <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> AudioUtils<span style="color:#f92672">();</span>
<span style="color:#75715e">//    ArrayList&lt;Song&gt; songs;
</span><span style="color:#75715e"></span>
    Bitmap musicFm<span style="color:#f92672">;</span><span style="color:#75715e">//音乐的封面的bitmap
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> ImageView imageView<span style="color:#f92672">;</span><span style="color:#75715e">//封面的imageView
</span><span style="color:#75715e"></span>    RotateAnimation rotateAnimation<span style="color:#f92672">;</span><span style="color:#75715e">//特效
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onCreate</span><span style="color:#f92672">(</span>Bundle savedInstanceState<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Log<span style="color:#f92672">.</span><span style="color:#a6e22e">d</span><span style="color:#f92672">(</span>TAG<span style="color:#f92672">,</span><span style="color:#e6db74">&#34;onCreate&#34;</span><span style="color:#f92672">);</span>
        <span style="color:#66d9ef">super</span><span style="color:#f92672">.</span><span style="color:#a6e22e">onCreate</span><span style="color:#f92672">(</span>savedInstanceState<span style="color:#f92672">);</span>
        setContentView<span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">layout</span><span style="color:#f92672">.</span><span style="color:#a6e22e">activity_main</span><span style="color:#f92672">);</span>


        Log<span style="color:#f92672">.</span><span style="color:#a6e22e">d</span><span style="color:#f92672">(</span>TAG<span style="color:#f92672">,</span><span style="color:#e6db74">&#34;checkSelfPermission&#34;</span><span style="color:#f92672">);</span>
        <span style="color:#75715e">//关于验证的函数，如果缺少这两个函数，那么需要自己开启应用的权限
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//判断权限,申请权限
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>ContextCompat<span style="color:#f92672">.</span><span style="color:#a6e22e">checkSelfPermission</span><span style="color:#f92672">(</span>MainActivity<span style="color:#f92672">.</span><span style="color:#a6e22e">this</span><span style="color:#f92672">,</span> Manifest<span style="color:#f92672">.</span><span style="color:#a6e22e">permission</span><span style="color:#f92672">.</span><span style="color:#a6e22e">WRITE_EXTERNAL_STORAGE</span>
        <span style="color:#f92672">)</span> <span style="color:#f92672">!=</span> PackageManager<span style="color:#f92672">.</span><span style="color:#a6e22e">PERMISSION_GRANTED</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            ActivityCompat<span style="color:#f92672">.</span><span style="color:#a6e22e">requestPermissions</span><span style="color:#f92672">(</span>MainActivity<span style="color:#f92672">.</span><span style="color:#a6e22e">this</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">[]{</span>Manifest
                    <span style="color:#f92672">.</span><span style="color:#a6e22e">permission</span><span style="color:#f92672">.</span><span style="color:#a6e22e">WRITE_EXTERNAL_STORAGE</span><span style="color:#f92672">},</span> 1<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            initMediaPlayer<span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>ContextCompat<span style="color:#f92672">.</span><span style="color:#a6e22e">checkSelfPermission</span><span style="color:#f92672">(</span>MainActivity<span style="color:#f92672">.</span><span style="color:#a6e22e">this</span><span style="color:#f92672">,</span> Manifest<span style="color:#f92672">.</span><span style="color:#a6e22e">permission</span><span style="color:#f92672">.</span><span style="color:#a6e22e">READ_EXTERNAL_STORAGE</span>
        <span style="color:#f92672">)</span> <span style="color:#f92672">!=</span> PackageManager<span style="color:#f92672">.</span><span style="color:#a6e22e">PERMISSION_GRANTED</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

            ActivityCompat<span style="color:#f92672">.</span><span style="color:#a6e22e">requestPermissions</span><span style="color:#f92672">(</span>MainActivity<span style="color:#f92672">.</span><span style="color:#a6e22e">this</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">[]{</span>Manifest
                    <span style="color:#f92672">.</span><span style="color:#a6e22e">permission</span><span style="color:#f92672">.</span><span style="color:#a6e22e">READ_EXTERNAL_STORAGE</span><span style="color:#f92672">},</span> 2<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            initMediaPlayer<span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>

    <span style="color:#f92672">}</span>


	<span style="color:#75715e">//关于验证的函数
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//请求权限处理回调
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onRequestPermissionsResult</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> requestCode<span style="color:#f92672">,</span> <span style="color:#a6e22e">@NonNull</span> String<span style="color:#f92672">[]</span> permissions<span style="color:#f92672">,</span> <span style="color:#a6e22e">@NonNull</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> grantResults<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Log<span style="color:#f92672">.</span><span style="color:#a6e22e">d</span><span style="color:#f92672">(</span>TAG<span style="color:#f92672">,</span><span style="color:#e6db74">&#34;onRequestPermissionsResult&#34;</span><span style="color:#f92672">);</span>
        <span style="color:#66d9ef">switch</span> <span style="color:#f92672">(</span>requestCode<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">case</span> 1<span style="color:#f92672">:</span>
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>grantResults<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">&gt;</span> 0 <span style="color:#f92672">&amp;&amp;</span> grantResults<span style="color:#f92672">[</span>0<span style="color:#f92672">]</span> <span style="color:#f92672">==</span> PackageManager<span style="color:#f92672">.</span><span style="color:#a6e22e">PERMISSION_GRANTED</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    initMediaPlayer<span style="color:#f92672">();</span>
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                    Toast<span style="color:#f92672">.</span><span style="color:#a6e22e">makeText</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;获取授权失败&#34;</span><span style="color:#f92672">,</span> Toast<span style="color:#f92672">.</span><span style="color:#a6e22e">LENGTH_SHORT</span><span style="color:#f92672">).</span><span style="color:#a6e22e">show</span><span style="color:#f92672">();</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
            <span style="color:#66d9ef">case</span> 2<span style="color:#f92672">:</span>
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>grantResults<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">&gt;</span> 0 <span style="color:#f92672">&amp;&amp;</span> grantResults<span style="color:#f92672">[</span>0<span style="color:#f92672">]</span> <span style="color:#f92672">==</span> PackageManager<span style="color:#f92672">.</span><span style="color:#a6e22e">PERMISSION_GRANTED</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    initMediaPlayer<span style="color:#f92672">();</span>
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                    Toast<span style="color:#f92672">.</span><span style="color:#a6e22e">makeText</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;正在获取授权&#34;</span><span style="color:#f92672">,</span> Toast<span style="color:#f92672">.</span><span style="color:#a6e22e">LENGTH_SHORT</span><span style="color:#f92672">).</span><span style="color:#a6e22e">show</span><span style="color:#f92672">();</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
            <span style="color:#66d9ef">default</span><span style="color:#f92672">:</span>
                Toast<span style="color:#f92672">.</span><span style="color:#a6e22e">makeText</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;获取授权失败&#34;</span><span style="color:#f92672">,</span> Toast<span style="color:#f92672">.</span><span style="color:#a6e22e">LENGTH_SHORT</span><span style="color:#f92672">).</span><span style="color:#a6e22e">show</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>


<span style="color:#75715e">//如果有权限就会运行这里的函数
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">initMediaPlayer</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        
        Log<span style="color:#f92672">.</span><span style="color:#a6e22e">d</span><span style="color:#f92672">(</span>TAG<span style="color:#f92672">,</span><span style="color:#e6db74">&#34;init MediaPlayer &#34;</span><span style="color:#f92672">);</span>
        <span style="color:#75715e">//必须在获取权限后new MusicService，
</span><span style="color:#75715e"></span>        musicService <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MusicService<span style="color:#f92672">();</span>

        <span style="color:#75715e">/* 非扫描的方式获取的音乐，是从数据库中直接获取
</span><span style="color:#75715e">        songs =  audioUtils.getAllSongs(this);
</span><span style="color:#75715e">//        for (Song song:songs){
</span><span style="color:#75715e">//            musicService.test(songs.get(0));
</span><span style="color:#75715e">        Bitmap fm = songs.get(0).getThumbnail();
</span><span style="color:#75715e">        imageView.setImageBitmap(fm);
</span><span style="color:#75715e">
</span><span style="color:#75715e">        Toast.makeText(this, songs.get(0).getFileName()+&#34; &#34;+songs.size(), Toast.LENGTH_SHORT).show();
</span><span style="color:#75715e">//        }
</span><span style="color:#75715e">*/</span>

        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            setListViewAdapter<span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            Log<span style="color:#f92672">.</span><span style="color:#a6e22e">i</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;TAG&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;读取信息失败&#34;</span><span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>


        imageView <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>ImageView<span style="color:#f92672">)</span> findViewById<span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">id</span><span style="color:#f92672">.</span><span style="color:#a6e22e">imageView</span><span style="color:#f92672">);</span>
        btnStart <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Button<span style="color:#f92672">)</span> findViewById<span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">id</span><span style="color:#f92672">.</span><span style="color:#a6e22e">btn_star</span><span style="color:#f92672">);</span>

        <span style="color:#75715e">//初始化特效
</span><span style="color:#75715e"></span>        rotateAnimation <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> RotateAnimation<span style="color:#f92672">(</span>0<span style="color:#f92672">,</span>360<span style="color:#f92672">,</span>
                Animation<span style="color:#f92672">.</span><span style="color:#a6e22e">RELATIVE_TO_SELF</span><span style="color:#f92672">,</span>0<span style="color:#f92672">.</span><span style="color:#a6e22e">5f</span><span style="color:#f92672">,</span>
                Animation<span style="color:#f92672">.</span><span style="color:#a6e22e">RELATIVE_TO_SELF</span><span style="color:#f92672">,</span>0<span style="color:#f92672">.</span><span style="color:#a6e22e">5f</span><span style="color:#f92672">);</span>
        
        <span style="color:#75715e">//开始的监听按钮，我们可以直接从这开始
</span><span style="color:#75715e"></span>        btnStart<span style="color:#f92672">.</span><span style="color:#a6e22e">setOnClickListener</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> View<span style="color:#f92672">.</span><span style="color:#a6e22e">OnClickListener</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onClick</span><span style="color:#f92672">(</span>View view<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
                    <span style="color:#75715e">/**
</span><span style="color:#75715e">                     * flag为1 的时候，此时player内没有东西，所以执行musicService.play()函数
</span><span style="color:#75715e">                     * 进行第一次播放，然后flag自增二不再进行第一次播放
</span><span style="color:#75715e">                     * 当再次点击“开始/暂停”按钮次数即大于1 将执行暂停或继续播放goplay()函数
</span><span style="color:#75715e">                     */</span>
                    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>flag <span style="color:#f92672">==</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                        btnStart<span style="color:#f92672">.</span><span style="color:#a6e22e">setText</span><span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">string</span><span style="color:#f92672">.</span><span style="color:#a6e22e">btn_pause</span><span style="color:#f92672">);</span>
                        Rotate<span style="color:#f92672">();</span><span style="color:#75715e">//旋转开始
</span><span style="color:#75715e"></span>                        musicService<span style="color:#f92672">.</span><span style="color:#a6e22e">play</span><span style="color:#f92672">();</span>
                        flag<span style="color:#f92672">++;</span>
                    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span>musicService<span style="color:#f92672">.</span><span style="color:#a6e22e">player</span><span style="color:#f92672">.</span><span style="color:#a6e22e">isPlaying</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                            btnStart<span style="color:#f92672">.</span><span style="color:#a6e22e">setText</span><span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">string</span><span style="color:#f92672">.</span><span style="color:#a6e22e">btn_pause</span><span style="color:#f92672">);</span>
                            Rotate<span style="color:#f92672">();</span><span style="color:#75715e">//旋转开始
</span><span style="color:#75715e"></span>                            musicService<span style="color:#f92672">.</span><span style="color:#a6e22e">goPlay</span><span style="color:#f92672">();</span>
                        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>musicService<span style="color:#f92672">.</span><span style="color:#a6e22e">player</span><span style="color:#f92672">.</span><span style="color:#a6e22e">isPlaying</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                            btnStart<span style="color:#f92672">.</span><span style="color:#a6e22e">setText</span><span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">string</span><span style="color:#f92672">.</span><span style="color:#a6e22e">btn_star</span><span style="color:#f92672">);</span>
                            rotateAnimation<span style="color:#f92672">.</span><span style="color:#a6e22e">cancel</span><span style="color:#f92672">();</span><span style="color:#75715e">//暂停图片
</span><span style="color:#75715e"></span>                            musicService<span style="color:#f92672">.</span><span style="color:#a6e22e">pause</span><span style="color:#f92672">();</span>
                        <span style="color:#f92672">}</span>
                    <span style="color:#f92672">}</span>
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    Log<span style="color:#f92672">.</span><span style="color:#a6e22e">i</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;LAT&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;开始异常！&#34;</span><span style="color:#f92672">);</span>
                <span style="color:#f92672">}</span>

            <span style="color:#f92672">}</span>
        <span style="color:#f92672">});</span>

        btnStop <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Button<span style="color:#f92672">)</span> findViewById<span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">id</span><span style="color:#f92672">.</span><span style="color:#a6e22e">btn_stop</span><span style="color:#f92672">);</span>
        btnStop<span style="color:#f92672">.</span><span style="color:#a6e22e">setOnClickListener</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> View<span style="color:#f92672">.</span><span style="color:#a6e22e">OnClickListener</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onClick</span><span style="color:#f92672">(</span>View view<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>

                    btnStart<span style="color:#f92672">.</span><span style="color:#a6e22e">setText</span><span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">string</span><span style="color:#f92672">.</span><span style="color:#a6e22e">btn_star</span><span style="color:#f92672">);</span>
                    rotateAnimation<span style="color:#f92672">.</span><span style="color:#a6e22e">cancel</span><span style="color:#f92672">();</span><span style="color:#75715e">//暂停旋转
</span><span style="color:#75715e"></span>                    musicService<span style="color:#f92672">.</span><span style="color:#a6e22e">stop</span><span style="color:#f92672">();</span>
                    flag <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span><span style="color:#75715e">//当点击停止按钮时，flag置为1
</span><span style="color:#75715e"></span>                    seekBar<span style="color:#f92672">.</span><span style="color:#a6e22e">setProgress</span><span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>
                    txtInfo<span style="color:#f92672">.</span><span style="color:#a6e22e">setText</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;播放已经停止&#34;</span><span style="color:#f92672">);</span>
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    Log<span style="color:#f92672">.</span><span style="color:#a6e22e">i</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;LAT&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;停止异常！&#34;</span><span style="color:#f92672">);</span>
                <span style="color:#f92672">}</span>

            <span style="color:#f92672">}</span>
        <span style="color:#f92672">});</span>

        btnLast <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Button<span style="color:#f92672">)</span> findViewById<span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">id</span><span style="color:#f92672">.</span><span style="color:#a6e22e">btn_last</span><span style="color:#f92672">);</span>
        btnLast<span style="color:#f92672">.</span><span style="color:#a6e22e">setOnClickListener</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> View<span style="color:#f92672">.</span><span style="color:#a6e22e">OnClickListener</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onClick</span><span style="color:#f92672">(</span>View view<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
                    btnStart<span style="color:#f92672">.</span><span style="color:#a6e22e">setText</span><span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">string</span><span style="color:#f92672">.</span><span style="color:#a6e22e">btn_pause</span><span style="color:#f92672">);</span>
                    Rotate<span style="color:#f92672">();</span><span style="color:#75715e">//继续旋转
</span><span style="color:#75715e"></span>                    musicService<span style="color:#f92672">.</span><span style="color:#a6e22e">last</span><span style="color:#f92672">();</span>
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    Log<span style="color:#f92672">.</span><span style="color:#a6e22e">i</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;LAT&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;上一曲异常！&#34;</span><span style="color:#f92672">);</span>
                <span style="color:#f92672">}</span>

            <span style="color:#f92672">}</span>
        <span style="color:#f92672">});</span>


        btnNext <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Button<span style="color:#f92672">)</span> findViewById<span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">id</span><span style="color:#f92672">.</span><span style="color:#a6e22e">btn_next</span><span style="color:#f92672">);</span>
        btnNext<span style="color:#f92672">.</span><span style="color:#a6e22e">setOnClickListener</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> View<span style="color:#f92672">.</span><span style="color:#a6e22e">OnClickListener</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onClick</span><span style="color:#f92672">(</span>View view<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
                    btnStart<span style="color:#f92672">.</span><span style="color:#a6e22e">setText</span><span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">string</span><span style="color:#f92672">.</span><span style="color:#a6e22e">btn_pause</span><span style="color:#f92672">);</span>
<span style="color:#75715e">//                    Rotate();//继续旋转
</span><span style="color:#75715e"></span>                    rotateAnimation<span style="color:#f92672">.</span><span style="color:#a6e22e">startNow</span><span style="color:#f92672">();</span>
                    musicService<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">();</span>
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    Log<span style="color:#f92672">.</span><span style="color:#a6e22e">i</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;LAT&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;下一曲异常！&#34;</span><span style="color:#f92672">);</span>
                <span style="color:#f92672">}</span>

            <span style="color:#f92672">}</span>
        <span style="color:#f92672">});</span>


        seekBar <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>SeekBar<span style="color:#f92672">)</span>

                findViewById<span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">id</span><span style="color:#f92672">.</span><span style="color:#a6e22e">sb</span><span style="color:#f92672">);</span>
        seekBar<span style="color:#f92672">.</span><span style="color:#a6e22e">setOnSeekBarChangeListener</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> SeekBar<span style="color:#f92672">.</span><span style="color:#a6e22e">OnSeekBarChangeListener</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onProgressChanged</span><span style="color:#f92672">(</span>SeekBar seekBar<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">boolean</span> b<span style="color:#f92672">)</span> <span style="color:#f92672">{</span><span style="color:#75715e">//用于监听SeekBar进度值的改变
</span><span style="color:#75715e"></span>
            <span style="color:#f92672">}</span>

            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onStartTrackingTouch</span><span style="color:#f92672">(</span>SeekBar seekBar<span style="color:#f92672">)</span> <span style="color:#f92672">{</span><span style="color:#75715e">//用于监听SeekBar开始拖动
</span><span style="color:#75715e"></span>
            <span style="color:#f92672">}</span>

            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onStopTrackingTouch</span><span style="color:#f92672">(</span>SeekBar seekBar<span style="color:#f92672">)</span> <span style="color:#f92672">{</span><span style="color:#75715e">//用于监听SeekBar停止拖动  SeekBar停止拖动后的事件
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">int</span> progress <span style="color:#f92672">=</span> seekBar<span style="color:#f92672">.</span><span style="color:#a6e22e">getProgress</span><span style="color:#f92672">();</span>
                Log<span style="color:#f92672">.</span><span style="color:#a6e22e">i</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;TAG:&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;&#34;</span> <span style="color:#f92672">+</span> progress <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">);</span>
                <span style="color:#66d9ef">int</span> musicMax <span style="color:#f92672">=</span> musicService<span style="color:#f92672">.</span><span style="color:#a6e22e">player</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getDuration</span><span style="color:#f92672">();</span> <span style="color:#75715e">//得到该首歌曲最长秒数
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">int</span> seekBarMax <span style="color:#f92672">=</span> seekBar<span style="color:#f92672">.</span><span style="color:#a6e22e">getMax</span><span style="color:#f92672">();</span>
                musicService<span style="color:#f92672">.</span><span style="color:#a6e22e">player</span>
                        <span style="color:#f92672">.</span><span style="color:#a6e22e">seekTo</span><span style="color:#f92672">(</span>musicMax <span style="color:#f92672">*</span> progress <span style="color:#f92672">/</span> seekBarMax<span style="color:#f92672">);</span><span style="color:#75715e">//跳到该曲该秒
</span><span style="color:#75715e"></span>                autoChange <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
                manulChange <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">});</span>

        txtInfo <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>TextView<span style="color:#f92672">)</span> findViewById<span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">id</span><span style="color:#f92672">.</span><span style="color:#a6e22e">tv1</span><span style="color:#f92672">);</span>

        Thread t <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Thread<span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">);</span><span style="color:#75715e">// 自动改变进度条的线程
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//实例化一个handler对象
</span><span style="color:#75715e"></span>        handler <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span>

                Handler<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
                    <span style="color:#a6e22e">@Override</span>
                    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">handleMessage</span><span style="color:#f92672">(</span>Message msg<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">super</span><span style="color:#f92672">.</span><span style="color:#a6e22e">handleMessage</span><span style="color:#f92672">(</span>msg<span style="color:#f92672">);</span>
                        <span style="color:#75715e">//更新UI
</span><span style="color:#75715e"></span>                        <span style="color:#66d9ef">int</span> mMax <span style="color:#f92672">=</span> musicService<span style="color:#f92672">.</span><span style="color:#a6e22e">player</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getDuration</span><span style="color:#f92672">();</span><span style="color:#75715e">//最大秒数
</span><span style="color:#75715e"></span>                        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>msg<span style="color:#f92672">.</span><span style="color:#a6e22e">what</span> <span style="color:#f92672">==</span> UPDATE<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                            <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
                                seekBar<span style="color:#f92672">.</span><span style="color:#a6e22e">setProgress</span><span style="color:#f92672">(</span>msg<span style="color:#f92672">.</span><span style="color:#a6e22e">arg1</span><span style="color:#f92672">);</span>
                                txtInfo<span style="color:#f92672">.</span><span style="color:#a6e22e">setText</span><span style="color:#f92672">(</span>setPlayInfo<span style="color:#f92672">(</span>msg<span style="color:#f92672">.</span><span style="color:#a6e22e">arg2</span> <span style="color:#f92672">/</span> 1000<span style="color:#f92672">,</span> mMax <span style="color:#f92672">/</span> 1000<span style="color:#f92672">));</span>
                            <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                                e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span>
                            <span style="color:#f92672">}</span>
                        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                            seekBar<span style="color:#f92672">.</span><span style="color:#a6e22e">setProgress</span><span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>
                            txtInfo<span style="color:#f92672">.</span><span style="color:#a6e22e">setText</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;播放已经停止&#34;</span><span style="color:#f92672">);</span>
                        <span style="color:#f92672">}</span>
                    <span style="color:#f92672">}</span>
                <span style="color:#f92672">}</span>

        <span style="color:#f92672">;</span>
        t<span style="color:#f92672">.</span><span style="color:#a6e22e">start</span><span style="color:#f92672">();</span>

    <span style="color:#f92672">}</span>
    
    <span style="color:#75715e">//向列表添加MP3名字，和listView有关的函数
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setListViewAdapter</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        Log<span style="color:#f92672">.</span><span style="color:#a6e22e">d</span><span style="color:#f92672">(</span>TAG<span style="color:#f92672">,</span><span style="color:#e6db74">&#34;musicList.size:&#34;</span><span style="color:#f92672">+</span>musicService<span style="color:#f92672">.</span><span style="color:#a6e22e">musicList</span><span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">());</span>
        String<span style="color:#f92672">[]</span> str <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">[</span>musicService<span style="color:#f92672">.</span><span style="color:#a6e22e">musicList</span><span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">()];</span>
        <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>String path <span style="color:#f92672">:</span> musicService<span style="color:#f92672">.</span><span style="color:#a6e22e">musicList</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            File file <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> File<span style="color:#f92672">(</span>path<span style="color:#f92672">);</span>
            str<span style="color:#f92672">[</span>i<span style="color:#f92672">++]</span> <span style="color:#f92672">=</span> file<span style="color:#f92672">.</span><span style="color:#a6e22e">getName</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
        ArrayAdapter adapter <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayAdapter<span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">,</span> android<span style="color:#f92672">.</span><span style="color:#a6e22e">R</span><span style="color:#f92672">.</span><span style="color:#a6e22e">layout</span><span style="color:#f92672">.</span><span style="color:#a6e22e">simple_list_item_1</span><span style="color:#f92672">,</span>str<span style="color:#f92672">);</span>
        listView <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>ListView<span style="color:#f92672">)</span> findViewById<span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">id</span><span style="color:#f92672">.</span><span style="color:#a6e22e">lv1</span><span style="color:#f92672">);</span>
        listView<span style="color:#f92672">.</span><span style="color:#a6e22e">setAdapter</span><span style="color:#f92672">(</span>adapter<span style="color:#f92672">);</span>

        <span style="color:#75715e">//通过播放的音乐路径来得到音乐大的封面
</span><span style="color:#75715e"></span>        String dataSource <span style="color:#f92672">=</span> musicService<span style="color:#f92672">.</span><span style="color:#a6e22e">musicList</span><span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>musicService<span style="color:#f92672">.</span><span style="color:#a6e22e">songNum</span><span style="color:#f92672">);</span><span style="color:#75715e">//得到当前播放音乐的路径
</span><span style="color:#75715e"></span>        musicFm <span style="color:#f92672">=</span>  audioUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">createAlbumArt</span><span style="color:#f92672">(</span>dataSource<span style="color:#f92672">);</span>
        imageView<span style="color:#f92672">.</span><span style="color:#a6e22e">setImageBitmap</span><span style="color:#f92672">(</span>musicFm<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">run</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span><span style="color:#75715e">//这里需要新开一个线程在后台播放，同时需要控制bar，因此需要service通信
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> position<span style="color:#f92672">,</span> mMax<span style="color:#f92672">,</span> sMax<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(!</span>Thread<span style="color:#f92672">.</span><span style="color:#a6e22e">currentThread</span><span style="color:#f92672">().</span><span style="color:#a6e22e">isInterrupted</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>musicService<span style="color:#f92672">.</span><span style="color:#a6e22e">player</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> musicService<span style="color:#f92672">.</span><span style="color:#a6e22e">player</span><span style="color:#f92672">.</span><span style="color:#a6e22e">isPlaying</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                position <span style="color:#f92672">=</span> musicService<span style="color:#f92672">.</span><span style="color:#a6e22e">getCurrentProgress</span><span style="color:#f92672">();</span><span style="color:#75715e">//得到当前歌曲播放进度(秒)
</span><span style="color:#75715e"></span>                mMax <span style="color:#f92672">=</span> musicService<span style="color:#f92672">.</span><span style="color:#a6e22e">player</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getDuration</span><span style="color:#f92672">();</span><span style="color:#75715e">//最大秒数
</span><span style="color:#75715e"></span>                sMax <span style="color:#f92672">=</span> seekBar<span style="color:#f92672">.</span><span style="color:#a6e22e">getMax</span><span style="color:#f92672">();</span><span style="color:#75715e">//seekBar最大值，算百分比
</span><span style="color:#75715e"></span>                Message m <span style="color:#f92672">=</span> handler<span style="color:#f92672">.</span><span style="color:#a6e22e">obtainMessage</span><span style="color:#f92672">();</span><span style="color:#75715e">//获取一个Message
</span><span style="color:#75715e"></span>                m<span style="color:#f92672">.</span><span style="color:#a6e22e">arg1</span> <span style="color:#f92672">=</span> position <span style="color:#f92672">*</span> sMax <span style="color:#f92672">/</span> mMax<span style="color:#f92672">;</span><span style="color:#75715e">//seekBar进度条的百分比
</span><span style="color:#75715e"></span>                m<span style="color:#f92672">.</span><span style="color:#a6e22e">arg2</span> <span style="color:#f92672">=</span> position<span style="color:#f92672">;</span>
                m<span style="color:#f92672">.</span><span style="color:#a6e22e">what</span> <span style="color:#f92672">=</span> UPDATE<span style="color:#f92672">;</span>
                handler<span style="color:#f92672">.</span><span style="color:#a6e22e">sendMessage</span><span style="color:#f92672">(</span>m<span style="color:#f92672">);</span>
                <span style="color:#75715e">//  handler.sendEmptyMessage(UPDATE);
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
                    Thread<span style="color:#f92672">.</span><span style="color:#a6e22e">sleep</span><span style="color:#f92672">(</span>1000<span style="color:#f92672">);</span><span style="color:#75715e">// 每间隔1秒发送一次更新消息
</span><span style="color:#75715e"></span>                <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>InterruptedException e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span>
                <span style="color:#f92672">}</span>
            <span style="color:#f92672">}</span>

        <span style="color:#f92672">}</span>

    <span style="color:#f92672">}</span>


    <span style="color:#75715e">//设置当前播放的信息
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> String <span style="color:#a6e22e">setPlayInfo</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> position<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> max<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">//设置图片
</span><span style="color:#75715e"></span>        String dataSource <span style="color:#f92672">=</span> musicService<span style="color:#f92672">.</span><span style="color:#a6e22e">musicList</span><span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>musicService<span style="color:#f92672">.</span><span style="color:#a6e22e">songNum</span><span style="color:#f92672">);</span><span style="color:#75715e">//得到当前播放音乐的路径
</span><span style="color:#75715e"></span>        musicFm <span style="color:#f92672">=</span>  audioUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">createAlbumArt</span><span style="color:#f92672">(</span>dataSource<span style="color:#f92672">);</span>
        imageView<span style="color:#f92672">.</span><span style="color:#a6e22e">setImageBitmap</span><span style="color:#f92672">(</span>musicFm<span style="color:#f92672">);</span>
        <span style="color:#75715e">//设置音乐信息
</span><span style="color:#75715e"></span>        String info <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;正在播放:  &#34;</span> <span style="color:#f92672">+</span> musicService<span style="color:#f92672">.</span><span style="color:#a6e22e">songName</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;\t\t&#34;</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> pMinutes <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>position <span style="color:#f92672">&gt;=</span> 60<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            pMinutes<span style="color:#f92672">++;</span>
            position <span style="color:#f92672">-=</span> 60<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        String now <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>pMinutes <span style="color:#f92672">&lt;</span> 10 <span style="color:#f92672">?</span> <span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">+</span> pMinutes <span style="color:#f92672">:</span> pMinutes<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;:&#34;</span>
                <span style="color:#f92672">+</span> <span style="color:#f92672">(</span>position <span style="color:#f92672">&lt;</span> 10 <span style="color:#f92672">?</span> <span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">+</span> position <span style="color:#f92672">:</span> position<span style="color:#f92672">);</span>

        <span style="color:#66d9ef">int</span> mMinutes <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>max <span style="color:#f92672">&gt;=</span> 60<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            mMinutes<span style="color:#f92672">++;</span>
            max <span style="color:#f92672">-=</span> 60<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        String all <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>mMinutes <span style="color:#f92672">&lt;</span> 10 <span style="color:#f92672">?</span> <span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">+</span> mMinutes <span style="color:#f92672">:</span> mMinutes<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;:&#34;</span>
                <span style="color:#f92672">+</span> <span style="color:#f92672">(</span>max <span style="color:#f92672">&lt;</span> 10 <span style="color:#f92672">?</span> <span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">+</span> max <span style="color:#f92672">:</span> max<span style="color:#f92672">);</span>

        <span style="color:#66d9ef">return</span> info <span style="color:#f92672">+</span> now <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; / &#34;</span> <span style="color:#f92672">+</span> all<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">//音乐封面旋转特效
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">Rotate</span><span style="color:#f92672">(){</span>
<span style="color:#75715e">//        AnimationSet animationSet = new AnimationSet(true);
</span><span style="color:#75715e"></span>
        rotateAnimation<span style="color:#f92672">.</span><span style="color:#a6e22e">setDuration</span><span style="color:#f92672">(</span>20000<span style="color:#f92672">);</span><span style="color:#75715e">//设定转一圈的时间
</span><span style="color:#75715e"></span>        rotateAnimation<span style="color:#f92672">.</span><span style="color:#a6e22e">setRepeatCount</span><span style="color:#f92672">(</span>Animation<span style="color:#f92672">.</span><span style="color:#a6e22e">INFINITE</span><span style="color:#f92672">);</span><span style="color:#75715e">//设定无限循环
</span><span style="color:#75715e"></span>        rotateAnimation<span style="color:#f92672">.</span><span style="color:#a6e22e">setRepeatMode</span><span style="color:#f92672">(</span>Animation<span style="color:#f92672">.</span><span style="color:#a6e22e">RESTART</span><span style="color:#f92672">);</span><span style="color:#75715e">//
</span><span style="color:#75715e"></span>
<span style="color:#75715e">//        animationSet.addAnimation(rotateAnimation);
</span><span style="color:#75715e"></span>        imageView<span style="color:#f92672">.</span><span style="color:#a6e22e">startAnimation</span><span style="color:#f92672">(</span>rotateAnimation<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><p>我的MusicService文件</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MusicService</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> File PATH <span style="color:#f92672">=</span> Environment<span style="color:#f92672">.</span><span style="color:#a6e22e">getExternalStorageDirectory</span><span style="color:#f92672">();</span><span style="color:#75715e">// 获取SD卡总目录。
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> musicList<span style="color:#f92672">;</span><span style="color:#75715e">// 存放找到的所有mp3的绝对路径。
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> MediaPlayer player<span style="color:#f92672">;</span> <span style="color:#75715e">// 定义多媒体对象
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> songNum<span style="color:#f92672">;</span> <span style="color:#75715e">// 当前播放的歌曲在List中的下标,flag为标致
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> String songName<span style="color:#f92672">;</span> <span style="color:#75715e">// 当前播放的歌曲名
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MusicFilter</span> <span style="color:#66d9ef">implements</span> FilenameFilter <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">accept</span><span style="color:#f92672">(</span>File dir<span style="color:#f92672">,</span> String name<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>name<span style="color:#f92672">.</span><span style="color:#a6e22e">endsWith</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;.mp3&#34;</span><span style="color:#f92672">));</span><span style="color:#75715e">//返回当前目录所有以.mp3结尾的文件
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">MusicService</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">super</span><span style="color:#f92672">();</span>
        player <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MediaPlayer<span style="color:#f92672">();</span>
        musicList <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;();</span>
        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            File MUSIC_PATH <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> File<span style="color:#f92672">(</span>PATH<span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;netease/cloudmusic/Music&#34;</span><span style="color:#f92672">);</span><span style="color:#75715e">//获取Music文件的二级目录
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>MUSIC_PATH<span style="color:#f92672">.</span><span style="color:#a6e22e">listFiles</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> MusicFilter<span style="color:#f92672">()).</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>File file <span style="color:#f92672">:</span> MUSIC_PATH<span style="color:#f92672">.</span><span style="color:#a6e22e">listFiles</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> MusicFilter<span style="color:#f92672">()))</span> <span style="color:#f92672">{</span>

                    musicList<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>file<span style="color:#f92672">.</span><span style="color:#a6e22e">getAbsolutePath</span><span style="color:#f92672">());</span>
                <span style="color:#f92672">}</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            Log<span style="color:#f92672">.</span><span style="color:#a6e22e">i</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;TAG&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;读取文件异常&#34;</span><span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>

    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setPlayName</span><span style="color:#f92672">(</span>String dataSource<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        File file <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> File<span style="color:#f92672">(</span>dataSource<span style="color:#f92672">);</span><span style="color:#75715e">//假设为D:\\mm.mp3
</span><span style="color:#75715e"></span>        String name <span style="color:#f92672">=</span> file<span style="color:#f92672">.</span><span style="color:#a6e22e">getName</span><span style="color:#f92672">();</span><span style="color:#75715e">//name=mm.mp3
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> index <span style="color:#f92672">=</span> name<span style="color:#f92672">.</span><span style="color:#a6e22e">lastIndexOf</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;.&#34;</span><span style="color:#f92672">);</span><span style="color:#75715e">//找到最后一个.
</span><span style="color:#75715e"></span>        songName <span style="color:#f92672">=</span> name<span style="color:#f92672">.</span><span style="color:#a6e22e">substring</span><span style="color:#f92672">(</span>0<span style="color:#f92672">,</span> index<span style="color:#f92672">);</span><span style="color:#75715e">//截取为mm
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">play</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            player<span style="color:#f92672">.</span><span style="color:#a6e22e">reset</span><span style="color:#f92672">();</span> <span style="color:#75715e">//重置多媒体
</span><span style="color:#75715e"></span>            String dataSource <span style="color:#f92672">=</span> musicList<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>songNum<span style="color:#f92672">);</span><span style="color:#75715e">//得到当前播放音乐的路径
</span><span style="color:#75715e"></span>            setPlayName<span style="color:#f92672">(</span>dataSource<span style="color:#f92672">);</span><span style="color:#75715e">//截取歌名
</span><span style="color:#75715e"></span>            <span style="color:#75715e">// 指定参数为音频文件
</span><span style="color:#75715e"></span>            player<span style="color:#f92672">.</span><span style="color:#a6e22e">setAudioStreamType</span><span style="color:#f92672">(</span>AudioManager<span style="color:#f92672">.</span><span style="color:#a6e22e">STREAM_MUSIC</span><span style="color:#f92672">);</span>
            player<span style="color:#f92672">.</span><span style="color:#a6e22e">setDataSource</span><span style="color:#f92672">(</span>dataSource<span style="color:#f92672">);</span><span style="color:#75715e">//为多媒体对象设置播放路径
</span><span style="color:#75715e"></span>            player<span style="color:#f92672">.</span><span style="color:#a6e22e">prepare</span><span style="color:#f92672">();</span><span style="color:#75715e">//准备播放
</span><span style="color:#75715e"></span>            player<span style="color:#f92672">.</span><span style="color:#a6e22e">start</span><span style="color:#f92672">();</span><span style="color:#75715e">//开始播放
</span><span style="color:#75715e"></span>            <span style="color:#75715e">//setOnCompletionListener 当当前多媒体对象播放完成时发生的事件
</span><span style="color:#75715e"></span>            player<span style="color:#f92672">.</span><span style="color:#a6e22e">setOnCompletionListener</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> MediaPlayer<span style="color:#f92672">.</span><span style="color:#a6e22e">OnCompletionListener</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onCompletion</span><span style="color:#f92672">(</span>MediaPlayer arg0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    next<span style="color:#f92672">();</span><span style="color:#75715e">//如果当前歌曲播放完毕,自动播放下一首.
</span><span style="color:#75715e"></span>                <span style="color:#f92672">}</span>
            <span style="color:#f92672">});</span>

        <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            Log<span style="color:#f92672">.</span><span style="color:#a6e22e">v</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;MusicService&#34;</span><span style="color:#f92672">,</span> e<span style="color:#f92672">.</span><span style="color:#a6e22e">getMessage</span><span style="color:#f92672">());</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#75715e">/*和数据库有关的
</span><span style="color:#75715e">    public void test(Song song){//测试数据库
</span><span style="color:#75715e">        try {
</span><span style="color:#75715e">            player.reset(); //重置多媒体
</span><span style="color:#75715e">
</span><span style="color:#75715e">            String dataSource = song.getFileUrl();
</span><span style="color:#75715e">//            String dataSource = musicList.get(songNum);//得到当前播放音乐的路径
</span><span style="color:#75715e">            setPlayName(dataSource);//截取歌名
</span><span style="color:#75715e">            // 指定参数为音频文件
</span><span style="color:#75715e">            player.setAudioStreamType(AudioManager.STREAM_MUSIC);
</span><span style="color:#75715e">            player.setDataSource(dataSource);//为多媒体对象设置播放路径
</span><span style="color:#75715e">            player.prepare();//准备播放
</span><span style="color:#75715e">            player.start();//开始播放
</span><span style="color:#75715e">            //setOnCompletionListener 当当前多媒体对象播放完成时发生的事件
</span><span style="color:#75715e">            player.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
</span><span style="color:#75715e">                public void onCompletion(MediaPlayer arg0) {
</span><span style="color:#75715e">                    next();//如果当前歌曲播放完毕,自动播放下一首.
</span><span style="color:#75715e">                }
</span><span style="color:#75715e">            });
</span><span style="color:#75715e">
</span><span style="color:#75715e">        } catch (Exception e) {
</span><span style="color:#75715e">            Log.v(&#34;MusicService&#34;, e.getMessage());
</span><span style="color:#75715e">        }
</span><span style="color:#75715e">    }
</span><span style="color:#75715e">*/</span>
    <span style="color:#75715e">//继续播放
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">goPlay</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> position <span style="color:#f92672">=</span> getCurrentProgress<span style="color:#f92672">();</span>
        player<span style="color:#f92672">.</span><span style="color:#a6e22e">seekTo</span><span style="color:#f92672">(</span>position<span style="color:#f92672">);</span><span style="color:#75715e">//设置当前MediaPlayer的播放位置，单位是毫秒。
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            player<span style="color:#f92672">.</span><span style="color:#a6e22e">prepare</span><span style="color:#f92672">();</span><span style="color:#75715e">//  同步的方式装载流媒体文件。
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
        player<span style="color:#f92672">.</span><span style="color:#a6e22e">start</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 获取当前进度
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getCurrentProgress</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>player <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;</span> player<span style="color:#f92672">.</span><span style="color:#a6e22e">isPlaying</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> player<span style="color:#f92672">.</span><span style="color:#a6e22e">getCurrentPosition</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>player <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;</span> <span style="color:#f92672">(!</span>player<span style="color:#f92672">.</span><span style="color:#a6e22e">isPlaying</span><span style="color:#f92672">()))</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> player<span style="color:#f92672">.</span><span style="color:#a6e22e">getCurrentPosition</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> 0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">next</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        songNum <span style="color:#f92672">=</span> songNum <span style="color:#f92672">==</span> musicList<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">()</span> <span style="color:#f92672">-</span> 1 <span style="color:#f92672">?</span> 0 <span style="color:#f92672">:</span> songNum <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        play<span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">last</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        songNum <span style="color:#f92672">=</span> songNum <span style="color:#f92672">==</span> 0 <span style="color:#f92672">?</span> musicList<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">()</span> <span style="color:#f92672">-</span> 1 <span style="color:#f92672">:</span> songNum <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
        play<span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 暂停播放
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">pause</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>player <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> player<span style="color:#f92672">.</span><span style="color:#a6e22e">isPlaying</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            player<span style="color:#f92672">.</span><span style="color:#a6e22e">pause</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">stop</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>player <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> player<span style="color:#f92672">.</span><span style="color:#a6e22e">isPlaying</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            player<span style="color:#f92672">.</span><span style="color:#a6e22e">stop</span><span style="color:#f92672">();</span>
            player<span style="color:#f92672">.</span><span style="color:#a6e22e">reset</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

</code></pre></div><p>我的圆形封面</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> cn.study.euraxluo.androidtup<span style="color:#f92672">;</span><span style="color:#75715e">/* AndroidTup
</span><span style="color:#75715e"> * cn.study.euraxluo.androidtup
</span><span style="color:#75715e"> * CircleImageView
</span><span style="color:#75715e"> * 2019/5/13 13:26
</span><span style="color:#75715e"> * author:Euraxluo
</span><span style="color:#75715e"> * TODO
</span><span style="color:#75715e"> */</span>

<span style="color:#f92672">import</span> android.content.Context<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> android.graphics.*<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> android.graphics.drawable.BitmapDrawable<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> android.graphics.drawable.ColorDrawable<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> android.graphics.drawable.Drawable<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> android.support.annotation.Nullable<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> android.util.AttributeSet<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> android.widget.ImageView<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">CircleImageView</span> <span style="color:#66d9ef">extends</span> android<span style="color:#f92672">.</span><span style="color:#a6e22e">support</span><span style="color:#f92672">.</span><span style="color:#a6e22e">v7</span><span style="color:#f92672">.</span><span style="color:#a6e22e">widget</span><span style="color:#f92672">.</span><span style="color:#a6e22e">AppCompatImageView</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> Paint mPaintBitmap <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Paint<span style="color:#f92672">(</span>Paint<span style="color:#f92672">.</span><span style="color:#a6e22e">ANTI_ALIAS_FLAG</span><span style="color:#f92672">);</span>
    <span style="color:#66d9ef">private</span> Bitmap mRawBitmap<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> BitmapShader mShader<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> Matrix mMatrix <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Matrix<span style="color:#f92672">();</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">CircleImageView</span><span style="color:#f92672">(</span>Context context<span style="color:#f92672">,</span>AttributeSet attrs<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">super</span><span style="color:#f92672">(</span>context<span style="color:#f92672">,</span> attrs<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>

    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onDraw</span><span style="color:#f92672">(</span>Canvas canvas<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Bitmap rawBitmap <span style="color:#f92672">=</span> getBimap<span style="color:#f92672">(</span>getDrawable<span style="color:#f92672">());</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>rawBitmap <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> viewWidth <span style="color:#f92672">=</span> getWidth<span style="color:#f92672">();</span>
            <span style="color:#66d9ef">int</span> viewHeight <span style="color:#f92672">=</span> getHeight<span style="color:#f92672">();</span>
            <span style="color:#66d9ef">int</span> viewMinSize <span style="color:#f92672">=</span> Math<span style="color:#f92672">.</span><span style="color:#a6e22e">min</span><span style="color:#f92672">(</span>viewWidth<span style="color:#f92672">,</span> viewHeight<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">float</span> dstHeight <span style="color:#f92672">=</span> viewMinSize<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">float</span> dstWidth <span style="color:#f92672">=</span> viewMinSize<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>mShader <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> <span style="color:#f92672">!</span>rawBitmap<span style="color:#f92672">.</span><span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span>mRawBitmap<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
                mRawBitmap <span style="color:#f92672">=</span> rawBitmap<span style="color:#f92672">;</span>
                mShader <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BitmapShader<span style="color:#f92672">(</span>mRawBitmap<span style="color:#f92672">,</span> Shader<span style="color:#f92672">.</span><span style="color:#a6e22e">TileMode</span><span style="color:#f92672">.</span><span style="color:#a6e22e">CLAMP</span><span style="color:#f92672">,</span> Shader<span style="color:#f92672">.</span><span style="color:#a6e22e">TileMode</span><span style="color:#f92672">.</span><span style="color:#a6e22e">CLAMP</span><span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>mShader <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                mMatrix<span style="color:#f92672">.</span><span style="color:#a6e22e">setScale</span><span style="color:#f92672">(</span>dstWidth <span style="color:#f92672">/</span> rawBitmap<span style="color:#f92672">.</span><span style="color:#a6e22e">getWidth</span><span style="color:#f92672">(),</span> dstHeight <span style="color:#f92672">/</span> rawBitmap<span style="color:#f92672">.</span><span style="color:#a6e22e">getHeight</span><span style="color:#f92672">());</span>
                mShader<span style="color:#f92672">.</span><span style="color:#a6e22e">setLocalMatrix</span><span style="color:#f92672">(</span>mMatrix<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
            mPaintBitmap<span style="color:#f92672">.</span><span style="color:#a6e22e">setShader</span><span style="color:#f92672">(</span>mShader<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">float</span> radius <span style="color:#f92672">=</span> viewMinSize <span style="color:#f92672">/</span> 2<span style="color:#f92672">.</span><span style="color:#a6e22e">0f</span><span style="color:#f92672">;</span>
            canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawCircle</span><span style="color:#f92672">(</span>radius<span style="color:#f92672">,</span> radius<span style="color:#f92672">,</span> radius<span style="color:#f92672">,</span> mPaintBitmap<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">super</span><span style="color:#f92672">.</span><span style="color:#a6e22e">onDraw</span><span style="color:#f92672">(</span>canvas<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> Bitmap <span style="color:#a6e22e">getBimap</span><span style="color:#f92672">(</span>Drawable drawable<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>drawable <span style="color:#66d9ef">instanceof</span> BitmapDrawable<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#f92672">((</span>BitmapDrawable<span style="color:#f92672">)</span> drawable<span style="color:#f92672">).</span><span style="color:#a6e22e">getBitmap</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>drawable <span style="color:#66d9ef">instanceof</span> ColorDrawable<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            Rect rect <span style="color:#f92672">=</span> drawable<span style="color:#f92672">.</span><span style="color:#a6e22e">getBounds</span><span style="color:#f92672">();</span>
            <span style="color:#66d9ef">int</span> width <span style="color:#f92672">=</span> rect<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">-</span> rect<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
            <span style="color:#66d9ef">int</span> height <span style="color:#f92672">=</span> rect<span style="color:#f92672">.</span><span style="color:#a6e22e">bottom</span> <span style="color:#f92672">-</span> rect<span style="color:#f92672">.</span><span style="color:#a6e22e">top</span><span style="color:#f92672">;</span>
            <span style="color:#66d9ef">int</span> color <span style="color:#f92672">=</span> <span style="color:#f92672">((</span>ColorDrawable<span style="color:#f92672">)</span> drawable<span style="color:#f92672">).</span><span style="color:#a6e22e">getColor</span><span style="color:#f92672">();</span>
            Bitmap bitmap <span style="color:#f92672">=</span> Bitmap<span style="color:#f92672">.</span><span style="color:#a6e22e">createBitmap</span><span style="color:#f92672">(</span>width<span style="color:#f92672">,</span> height<span style="color:#f92672">,</span> Bitmap<span style="color:#f92672">.</span><span style="color:#a6e22e">Config</span><span style="color:#f92672">.</span><span style="color:#a6e22e">ARGB_8888</span><span style="color:#f92672">);</span>
            Canvas canvas <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Canvas<span style="color:#f92672">(</span>bitmap<span style="color:#f92672">);</span>
            canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawARGB</span><span style="color:#f92672">(</span>Color<span style="color:#f92672">.</span><span style="color:#a6e22e">alpha</span><span style="color:#f92672">(</span>color<span style="color:#f92672">),</span> Color<span style="color:#f92672">.</span><span style="color:#a6e22e">red</span><span style="color:#f92672">(</span>color<span style="color:#f92672">),</span> Color<span style="color:#f92672">.</span><span style="color:#a6e22e">green</span><span style="color:#f92672">(</span>color<span style="color:#f92672">),</span> Color<span style="color:#f92672">.</span><span style="color:#a6e22e">blue</span><span style="color:#f92672">(</span>color<span style="color:#f92672">));</span>
            <span style="color:#66d9ef">return</span> bitmap<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>

</code></pre></div><hr>
<p>数据库扫描用的：Song实体类</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> cn.study.euraxluo.androidtup<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> android.graphics.Bitmap<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Song</span> <span style="color:#f92672">{</span>


    <span style="color:#66d9ef">private</span> String fileName<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> String title<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> duration<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> String singer<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> String album<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> String year<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> String type<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> String size<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> String fileUrl<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> Bitmap Thumbnail<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> Bitmap <span style="color:#a6e22e">getThumbnail</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> Thumbnail<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setThumbnail</span><span style="color:#f92672">(</span>Bitmap thumbnail<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Thumbnail <span style="color:#f92672">=</span> thumbnail<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getFileName</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> fileName<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setFileName</span><span style="color:#f92672">(</span>String fileName<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">fileName</span> <span style="color:#f92672">=</span> fileName<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getTitle</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> title<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setTitle</span><span style="color:#f92672">(</span>String title<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">title</span> <span style="color:#f92672">=</span> title<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getDuration</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> duration<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setDuration</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> duration<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">duration</span> <span style="color:#f92672">=</span> duration<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getSinger</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> singer<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setSinger</span><span style="color:#f92672">(</span>String singer<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">singer</span> <span style="color:#f92672">=</span> singer<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getAlbum</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> album<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setAlbum</span><span style="color:#f92672">(</span>String album<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">album</span> <span style="color:#f92672">=</span> album<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getYear</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> year<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setYear</span><span style="color:#f92672">(</span>String year<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">year</span> <span style="color:#f92672">=</span> year<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getType</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> type<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setType</span><span style="color:#f92672">(</span>String type<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">type</span> <span style="color:#f92672">=</span> type<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getSize</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> size<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setSize</span><span style="color:#f92672">(</span>String size<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">size</span> <span style="color:#f92672">=</span> size<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getFileUrl</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> fileUrl<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setFileUrl</span><span style="color:#f92672">(</span>String fileUrl<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">fileUrl</span> <span style="color:#f92672">=</span> fileUrl<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Song</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">super</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Song</span><span style="color:#f92672">(</span>String fileName<span style="color:#f92672">,</span> String title<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> duration<span style="color:#f92672">,</span> String singer<span style="color:#f92672">,</span>
                String album<span style="color:#f92672">,</span> String year<span style="color:#f92672">,</span> String type<span style="color:#f92672">,</span> String size<span style="color:#f92672">,</span> String fileUrl<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">super</span><span style="color:#f92672">();</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">fileName</span> <span style="color:#f92672">=</span> fileName<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">title</span> <span style="color:#f92672">=</span> title<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">duration</span> <span style="color:#f92672">=</span> duration<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">singer</span> <span style="color:#f92672">=</span> singer<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">album</span> <span style="color:#f92672">=</span> album<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">year</span> <span style="color:#f92672">=</span> year<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">type</span> <span style="color:#f92672">=</span> type<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">size</span> <span style="color:#f92672">=</span> size<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">fileUrl</span> <span style="color:#f92672">=</span> fileUrl<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">toString</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Song [fileName=&#34;</span> <span style="color:#f92672">+</span> fileName <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;, title=&#34;</span> <span style="color:#f92672">+</span> title
                <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;, duration=&#34;</span> <span style="color:#f92672">+</span> duration <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;, singer=&#34;</span> <span style="color:#f92672">+</span> singer <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;, album=&#34;</span>
                <span style="color:#f92672">+</span> album <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;, year=&#34;</span> <span style="color:#f92672">+</span> year <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;, type=&#34;</span> <span style="color:#f92672">+</span> type <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;, size=&#34;</span>
                <span style="color:#f92672">+</span> size <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;, fileUrl=&#34;</span> <span style="color:#f92672">+</span> fileUrl <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;]&#34;</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><p>扫描数据的AudioUtils.java</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> cn.study.euraxluo.androidtup<span style="color:#f92672">;</span>


<span style="color:#f92672">import</span> android.content.Context<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> android.database.Cursor<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> android.graphics.Bitmap<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> android.graphics.BitmapFactory<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> android.media.MediaMetadataRetriever<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> android.provider.MediaStore<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> java.util.ArrayList<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AudioUtils</span> <span style="color:#f92672">{</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 获取sd卡所有的音乐文件
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @return
</span><span style="color:#75715e">     * @throws Exception
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> ArrayList<span style="color:#f92672">&lt;</span>Song<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">getAllSongs</span><span style="color:#f92672">(</span>Context context<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

        ArrayList<span style="color:#f92672">&lt;</span>Song<span style="color:#f92672">&gt;</span> songs <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>

        Cursor cursor <span style="color:#f92672">=</span> context<span style="color:#f92672">.</span><span style="color:#a6e22e">getContentResolver</span><span style="color:#f92672">().</span><span style="color:#a6e22e">query</span><span style="color:#f92672">(</span>
                MediaStore<span style="color:#f92672">.</span><span style="color:#a6e22e">Audio</span><span style="color:#f92672">.</span><span style="color:#a6e22e">Media</span><span style="color:#f92672">.</span><span style="color:#a6e22e">EXTERNAL_CONTENT_URI</span><span style="color:#f92672">,</span>
                <span style="color:#66d9ef">new</span> String<span style="color:#f92672">[]</span> <span style="color:#f92672">{</span> MediaStore<span style="color:#f92672">.</span><span style="color:#a6e22e">Audio</span><span style="color:#f92672">.</span><span style="color:#a6e22e">Media</span><span style="color:#f92672">.</span><span style="color:#a6e22e">_ID</span><span style="color:#f92672">,</span>
                        MediaStore<span style="color:#f92672">.</span><span style="color:#a6e22e">Audio</span><span style="color:#f92672">.</span><span style="color:#a6e22e">Media</span><span style="color:#f92672">.</span><span style="color:#a6e22e">DISPLAY_NAME</span><span style="color:#f92672">,</span>
                        MediaStore<span style="color:#f92672">.</span><span style="color:#a6e22e">Audio</span><span style="color:#f92672">.</span><span style="color:#a6e22e">Media</span><span style="color:#f92672">.</span><span style="color:#a6e22e">TITLE</span><span style="color:#f92672">,</span>
                        MediaStore<span style="color:#f92672">.</span><span style="color:#a6e22e">Audio</span><span style="color:#f92672">.</span><span style="color:#a6e22e">Media</span><span style="color:#f92672">.</span><span style="color:#a6e22e">DURATION</span><span style="color:#f92672">,</span>
                        MediaStore<span style="color:#f92672">.</span><span style="color:#a6e22e">Audio</span><span style="color:#f92672">.</span><span style="color:#a6e22e">Media</span><span style="color:#f92672">.</span><span style="color:#a6e22e">ARTIST</span><span style="color:#f92672">,</span>
                        MediaStore<span style="color:#f92672">.</span><span style="color:#a6e22e">Audio</span><span style="color:#f92672">.</span><span style="color:#a6e22e">Media</span><span style="color:#f92672">.</span><span style="color:#a6e22e">ALBUM</span><span style="color:#f92672">,</span>
                        MediaStore<span style="color:#f92672">.</span><span style="color:#a6e22e">Audio</span><span style="color:#f92672">.</span><span style="color:#a6e22e">Media</span><span style="color:#f92672">.</span><span style="color:#a6e22e">YEAR</span><span style="color:#f92672">,</span>
                        MediaStore<span style="color:#f92672">.</span><span style="color:#a6e22e">Audio</span><span style="color:#f92672">.</span><span style="color:#a6e22e">Media</span><span style="color:#f92672">.</span><span style="color:#a6e22e">MIME_TYPE</span><span style="color:#f92672">,</span>
                        MediaStore<span style="color:#f92672">.</span><span style="color:#a6e22e">Audio</span><span style="color:#f92672">.</span><span style="color:#a6e22e">Media</span><span style="color:#f92672">.</span><span style="color:#a6e22e">SIZE</span><span style="color:#f92672">,</span>
                        MediaStore<span style="color:#f92672">.</span><span style="color:#a6e22e">Audio</span><span style="color:#f92672">.</span><span style="color:#a6e22e">Media</span><span style="color:#f92672">.</span><span style="color:#a6e22e">DATA</span> <span style="color:#f92672">},</span>
                MediaStore<span style="color:#f92672">.</span><span style="color:#a6e22e">Audio</span><span style="color:#f92672">.</span><span style="color:#a6e22e">Media</span><span style="color:#f92672">.</span><span style="color:#a6e22e">MIME_TYPE</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;=? or &#34;</span>
                        <span style="color:#f92672">+</span> MediaStore<span style="color:#f92672">.</span><span style="color:#a6e22e">Audio</span><span style="color:#f92672">.</span><span style="color:#a6e22e">Media</span><span style="color:#f92672">.</span><span style="color:#a6e22e">MIME_TYPE</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;=?&#34;</span><span style="color:#f92672">,</span>
                <span style="color:#66d9ef">new</span> String<span style="color:#f92672">[]</span> <span style="color:#f92672">{</span> <span style="color:#e6db74">&#34;audio/mpeg&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;audio/x-ms-wma&#34;</span> <span style="color:#f92672">},</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>

        songs <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;</span>Song<span style="color:#f92672">&gt;();</span>

        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>cursor<span style="color:#f92672">.</span><span style="color:#a6e22e">moveToFirst</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>

            Song song <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>

            <span style="color:#66d9ef">do</span> <span style="color:#f92672">{</span>
                song <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Song<span style="color:#f92672">();</span>
                <span style="color:#75715e">// 文件名
</span><span style="color:#75715e"></span>                song<span style="color:#f92672">.</span><span style="color:#a6e22e">setFileName</span><span style="color:#f92672">(</span>cursor<span style="color:#f92672">.</span><span style="color:#a6e22e">getString</span><span style="color:#f92672">(</span>1<span style="color:#f92672">));</span>
                <span style="color:#75715e">// 歌曲名
</span><span style="color:#75715e"></span>                song<span style="color:#f92672">.</span><span style="color:#a6e22e">setTitle</span><span style="color:#f92672">(</span>cursor<span style="color:#f92672">.</span><span style="color:#a6e22e">getString</span><span style="color:#f92672">(</span>2<span style="color:#f92672">));</span>
                <span style="color:#75715e">// 时长
</span><span style="color:#75715e"></span>                song<span style="color:#f92672">.</span><span style="color:#a6e22e">setDuration</span><span style="color:#f92672">(</span>cursor<span style="color:#f92672">.</span><span style="color:#a6e22e">getInt</span><span style="color:#f92672">(</span>3<span style="color:#f92672">));</span>
                <span style="color:#75715e">// 歌手名
</span><span style="color:#75715e"></span>                song<span style="color:#f92672">.</span><span style="color:#a6e22e">setSinger</span><span style="color:#f92672">(</span>cursor<span style="color:#f92672">.</span><span style="color:#a6e22e">getString</span><span style="color:#f92672">(</span>4<span style="color:#f92672">));</span>
                <span style="color:#75715e">// 专辑名
</span><span style="color:#75715e"></span>                song<span style="color:#f92672">.</span><span style="color:#a6e22e">setAlbum</span><span style="color:#f92672">(</span>cursor<span style="color:#f92672">.</span><span style="color:#a6e22e">getString</span><span style="color:#f92672">(</span>5<span style="color:#f92672">));</span>
                <span style="color:#75715e">// 年代
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>cursor<span style="color:#f92672">.</span><span style="color:#a6e22e">getString</span><span style="color:#f92672">(</span>6<span style="color:#f92672">)</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    song<span style="color:#f92672">.</span><span style="color:#a6e22e">setYear</span><span style="color:#f92672">(</span>cursor<span style="color:#f92672">.</span><span style="color:#a6e22e">getString</span><span style="color:#f92672">(</span>6<span style="color:#f92672">));</span>
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                    song<span style="color:#f92672">.</span><span style="color:#a6e22e">setYear</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;未知&#34;</span><span style="color:#f92672">);</span>
                <span style="color:#f92672">}</span>
                <span style="color:#75715e">// 歌曲格式
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span><span style="color:#e6db74">&#34;audio/mpeg&#34;</span><span style="color:#f92672">.</span><span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span>cursor<span style="color:#f92672">.</span><span style="color:#a6e22e">getString</span><span style="color:#f92672">(</span>7<span style="color:#f92672">).</span><span style="color:#a6e22e">trim</span><span style="color:#f92672">()))</span> <span style="color:#f92672">{</span>
                    song<span style="color:#f92672">.</span><span style="color:#a6e22e">setType</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;mp3&#34;</span><span style="color:#f92672">);</span>
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span><span style="color:#e6db74">&#34;audio/x-ms-wma&#34;</span><span style="color:#f92672">.</span><span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span>cursor<span style="color:#f92672">.</span><span style="color:#a6e22e">getString</span><span style="color:#f92672">(</span>7<span style="color:#f92672">).</span><span style="color:#a6e22e">trim</span><span style="color:#f92672">()))</span> <span style="color:#f92672">{</span>
                    song<span style="color:#f92672">.</span><span style="color:#a6e22e">setType</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;wma&#34;</span><span style="color:#f92672">);</span>
                <span style="color:#f92672">}</span>
                <span style="color:#75715e">// 文件大小
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>cursor<span style="color:#f92672">.</span><span style="color:#a6e22e">getString</span><span style="color:#f92672">(</span>8<span style="color:#f92672">)</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    <span style="color:#66d9ef">float</span> size <span style="color:#f92672">=</span> cursor<span style="color:#f92672">.</span><span style="color:#a6e22e">getInt</span><span style="color:#f92672">(</span>8<span style="color:#f92672">)</span> <span style="color:#f92672">/</span> 1024f <span style="color:#f92672">/</span> 1024f<span style="color:#f92672">;</span>
                    song<span style="color:#f92672">.</span><span style="color:#a6e22e">setSize</span><span style="color:#f92672">((</span>size <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">).</span><span style="color:#a6e22e">substring</span><span style="color:#f92672">(</span>0<span style="color:#f92672">,</span> 4<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;M&#34;</span><span style="color:#f92672">);</span>
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                    song<span style="color:#f92672">.</span><span style="color:#a6e22e">setSize</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;未知&#34;</span><span style="color:#f92672">);</span>
                <span style="color:#f92672">}</span>
                <span style="color:#75715e">// 文件路径
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>cursor<span style="color:#f92672">.</span><span style="color:#a6e22e">getString</span><span style="color:#f92672">(</span>9<span style="color:#f92672">)</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    song<span style="color:#f92672">.</span><span style="color:#a6e22e">setFileUrl</span><span style="color:#f92672">(</span>cursor<span style="color:#f92672">.</span><span style="color:#a6e22e">getString</span><span style="color:#f92672">(</span>9<span style="color:#f92672">));</span>
                <span style="color:#f92672">}</span>

                <span style="color:#75715e">//获取专辑封面（如果数据量大的话，会很耗时——需要考虑如何开辟子线程加载）
</span><span style="color:#75715e"></span>                Bitmap albumArt <span style="color:#f92672">=</span> createAlbumArt<span style="color:#f92672">(</span>song<span style="color:#f92672">.</span><span style="color:#a6e22e">getFileUrl</span><span style="color:#f92672">());</span>
                song<span style="color:#f92672">.</span><span style="color:#a6e22e">setThumbnail</span><span style="color:#f92672">(</span>albumArt<span style="color:#f92672">);</span>
                
                songs<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>song<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>cursor<span style="color:#f92672">.</span><span style="color:#a6e22e">moveToNext</span><span style="color:#f92672">());</span>

            cursor<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>

        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> songs<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">calculateInSampleSize</span><span style="color:#f92672">(</span>BitmapFactory<span style="color:#f92672">.</span><span style="color:#a6e22e">Options</span> options<span style="color:#f92672">,</span><span style="color:#66d9ef">int</span> reqWidth<span style="color:#f92672">,</span><span style="color:#66d9ef">int</span> reqHeight<span style="color:#f92672">){</span>
        <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> height <span style="color:#f92672">=</span> options<span style="color:#f92672">.</span><span style="color:#a6e22e">outHeight</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> width <span style="color:#f92672">=</span> options<span style="color:#f92672">.</span><span style="color:#a6e22e">outWidth</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> inSampleSize <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>height <span style="color:#f92672">&gt;</span> reqHeight <span style="color:#f92672">||</span> width <span style="color:#f92672">&gt;</span> reqWidth<span style="color:#f92672">){</span>
            <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> halfHeight <span style="color:#f92672">=</span> height<span style="color:#f92672">/</span>2<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> halfWidth <span style="color:#f92672">=</span> width<span style="color:#f92672">/</span>2<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">((</span>halfHeight<span style="color:#f92672">/</span>inSampleSize<span style="color:#f92672">)&gt;</span>reqHeight <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">(</span>halfWidth<span style="color:#f92672">/</span>inSampleSize<span style="color:#f92672">)&gt;</span>reqWidth<span style="color:#f92672">)</span> inSampleSize<span style="color:#f92672">*=</span>2<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> inSampleSize<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> Bitmap <span style="color:#a6e22e">createAlbumArt</span><span style="color:#f92672">(</span><span style="color:#66d9ef">final</span> String filePath<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Bitmap bitmap <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#75715e">//能够获取多媒体文件元数据的类
</span><span style="color:#75715e"></span>        MediaMetadataRetriever retriever <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MediaMetadataRetriever<span style="color:#f92672">();</span>
        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            retriever<span style="color:#f92672">.</span><span style="color:#a6e22e">setDataSource</span><span style="color:#f92672">(</span>filePath<span style="color:#f92672">);</span> <span style="color:#75715e">//设置数据源
</span><span style="color:#75715e"></span>
            <span style="color:#66d9ef">byte</span><span style="color:#f92672">[]</span> embedPic <span style="color:#f92672">=</span> retriever<span style="color:#f92672">.</span><span style="color:#a6e22e">getEmbeddedPicture</span><span style="color:#f92672">();</span> <span style="color:#75715e">//得到字节型数据
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">final</span> BitmapFactory<span style="color:#f92672">.</span><span style="color:#a6e22e">Options</span> options <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BitmapFactory<span style="color:#f92672">.</span><span style="color:#a6e22e">Options</span><span style="color:#f92672">();</span>
            options<span style="color:#f92672">.</span><span style="color:#a6e22e">inJustDecodeBounds</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
            BitmapFactory<span style="color:#f92672">.</span><span style="color:#a6e22e">decodeByteArray</span><span style="color:#f92672">(</span>embedPic<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> embedPic<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">,</span>options<span style="color:#f92672">);</span>
            options<span style="color:#f92672">.</span><span style="color:#a6e22e">inSampleSize</span> <span style="color:#f92672">=</span> calculateInSampleSize<span style="color:#f92672">(</span>options<span style="color:#f92672">,</span>100<span style="color:#f92672">,</span>100<span style="color:#f92672">);</span>
            options<span style="color:#f92672">.</span><span style="color:#a6e22e">inJustDecodeBounds</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
            bitmap <span style="color:#f92672">=</span> BitmapFactory<span style="color:#f92672">.</span><span style="color:#a6e22e">decodeByteArray</span><span style="color:#f92672">(</span>embedPic<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> embedPic<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">,</span>options<span style="color:#f92672">);</span> <span style="color:#75715e">//转换为图片
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
                retriever<span style="color:#f92672">.</span><span style="color:#a6e22e">release</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception e2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                e2<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> bitmap<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div></div><div class="modal fade" id="rewardModal" tabindex="-1" aria-labelledby="rewardModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content surface">
      <div class="modal-header">
        <h5 class="modal-title" id="rewardModalLabel"><i class="fas fa-fw fa-coffee"></i>Buy me a coffee</h5>
        <a href="#" data-bs-dismiss="modal" class="btn btn-sm btn-outline-primary" aria-label="Close"><i class="fas fa-times"></i></a>
      </div>
      <div class="modal-body">
        <ul class="nav nav-tabs mb-3" role="tablist"><li class="nav-item text-nowrap" role="presentation">
            <a class="nav-link active" id="reward-alipay-tab" data-bs-toggle="tab" href="#reward-alipay" role="tab" aria-controls="reward-alipay" aria-selected="true">
              <i class="fab fa-fw fa-alipay"></i>Alipay
            </a>
          </li><li class="nav-item text-nowrap" role="presentation">
            <a class="nav-link" id="reward-wechat-tab" data-bs-toggle="tab" href="#reward-wechat" role="tab" aria-controls="reward-wechat" aria-selected="true">
              <i class="fab fa-fw fa-weixin"></i>WeChat
            </a>
          </li></ul>
        <div class="tab-content" id="rewardTabContent"><div class="tab-pane fade post-reward-content show active" id="reward-alipay" role="tabpanel" aria-labelledby="reward-alipay-tab">
            <img class="img-fluid post-reward-img" src="https://gitee.com/Euraxluo/images/raw/master/picgo/_alipay.jpg" loading="lazy" />
          </div><div class="tab-pane fade post-reward-content show" id="reward-wechat" role="tabpanel" aria-labelledby="reward-wechat-tab">
            <img class="img-fluid post-reward-img" src="https://gitee.com/Euraxluo/images/raw/master/picgo/_wechatpay.jpg" loading="lazy" />
          </div></div>
      </div>
    </div>
  </div>
</div><hr /><div class="post-copyright" id="post-copyright">
  <a class="d-flex align-items-center flex-column" target="_blank" rel="license noopener noreferrer" href="https://creativecommons.org/licenses/by-nc/4.0/deed.en">
    <span><i class="fab fa-fw fa-2x fa-creative-commons"></i><i class="fab fa-fw fa-2x fa-creative-commons-by"></i><i class="fab fa-fw fa-2x fa-creative-commons-nc"></i></span>
    CC BY-NC 4.0 
  </a>
</div>


<hr /><div class="post-navs d-flex mb-3 justify-content-evenly">
  <div class="post-nav post-prev"><i class="fas fa-fw fa-chevron-left"></i>
    <a href="https://euraxluo.gitee.io/blog/posts/note/%E5%85%B3%E4%BA%8Eviewpager/">关于ViewPager
</a>
  </div><div class="post-nav post-next">
    <a href="https://euraxluo.gitee.io/blog/posts/note/vslam/">VSLAM
</a>
    <i class="fas fa-fw fa-chevron-right"></i>
  </div></div></div>
</article><section class="related-posts row card component">
    <div class="card-header">
      <h2 class="card-title">Related Posts</h2>
    </div>
    <div class="card-body">
      <ul class="post-list"><li>
          <a href="https://euraxluo.gitee.io/blog/posts/note/c&#43;&#43;-%E5%B0%8F%E8%AE%B0/">C&#43;&#43; 小记
</a>
          <span class="float-end post-date">2019-02-21
</span>
        </li><li>
          <a href="https://euraxluo.gitee.io/blog/posts/note/slam/">SLAM
</a>
          <span class="float-end post-date">2019-02-21
</span>
        </li><li>
          <a href="https://euraxluo.gitee.io/blog/posts/note/scala%E5%85%A5%E9%97%A8/">Scala入门
</a>
          <span class="float-end post-date">2019-02-21
</span>
        </li><li>
          <a href="https://euraxluo.gitee.io/blog/posts/note/vslam/">VSLAM
</a>
          <span class="float-end post-date">2019-02-21
</span>
        </li><li>
          <a href="https://euraxluo.gitee.io/blog/posts/note/java%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/">java面试笔记
</a>
          <span class="float-end post-date">2019-02-21
</span>
        </li><li>
          <a href="https://euraxluo.gitee.io/blog/posts/note/%E5%A4%8D%E6%9D%82%E7%B3%BB%E7%BB%9F/">pattern:斑图
</a>
          <span class="float-end post-date">2019-02-21
</span>
        </li></ul>
    </div>
  </section><div class="card component row post-comments" id="post-comments">
  <div class="card-header">
    <h2 class="card-title">Comments</h2>
  </div>
  <div class="card-body"><script src="https://utteranc.es/client.js"
  repo="Euraxluo/Euraxluo.github.io"
  issue-term="pathname"
  label="✨💬✨"
  theme="github-dark"
  crossorigin="anonymous"
  async>
</script></div>
</div></div>
</div><aside class="col-lg-4 sidebar d-flex">
  <div class="container">
    
    <section class="card row text-center profile component">
  <div class="card-body">
    <div class="col-12 d-flex align-items-center justify-content-center"><img class="profile-avatar rounded-circle" alt="Euraxluo" src="https://gitee.com/Euraxluo/images/raw/master/picgo/profile.png" loading="lazy"
  
   />
</div>
    <div class="col-12 profile-meta"><div class="profile-name">Euraxluo</div><div class="profile-bio">Engineer.</div><div class="profile-company"><i class="fas fa-fw fa-building"></i>dml</div><div class="profile-location"><i class="fas fa-fw fa-map-marker-alt"></i>Chengdu</div><div class="profile-about"><i class="fas fa-fw fa-user"></i><a href="https://euraxluo.gitee.io/blog/about/">About</a></div></div>
  </div>
</section>
  <section class="featured-posts row card component">
    <div class="card-header">
      <h2 class="card-title">Featured Posts</h2>
    </div>
    <div class="card-body">
      <ul class="post-list"><li>
          <a href="https://euraxluo.gitee.io/blog/posts/note/java%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/">java面试笔记
</a>
        </li><li>
          <a href="https://euraxluo.gitee.io/blog/posts/python/python-socket/">python socket编程
</a>
        </li><li>
          <a href="https://euraxluo.gitee.io/blog/posts/note/rust%E5%AD%A6%E4%B9%A0/">rust学习
</a>
        </li><li>
          <a href="https://euraxluo.gitee.io/blog/posts/note/scala%E5%85%A5%E9%97%A8/">Scala入门
</a>
        </li><li>
          <a href="https://euraxluo.gitee.io/blog/posts/note/slam/">SLAM
</a>
        </li></ul>
    </div>
  </section><section class="recent-posts row card component">
  <div class="card-header">
    <h2 class="card-title">Recent Posts</h2>
  </div>
  <div class="card-body">
    <ul class="post-list"><li>
        <a href="https://euraxluo.gitee.io/blog/posts/note/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/">数据分析
</a>
      </li><li>
        <a href="https://euraxluo.gitee.io/blog/posts/or/%E8%BD%A6%E8%BE%86%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98/">车辆路径问题
</a>
      </li><li>
        <a href="https://euraxluo.gitee.io/blog/posts/nlp/nlp%E5%9F%BA%E7%A1%80/">NLP基础 
</a>
      </li><li>
        <a href="https://euraxluo.gitee.io/blog/posts/java/servlet1/">Servlet1
</a>
      </li><li>
        <a href="https://euraxluo.gitee.io/blog/posts/java/servlet2/">Servlet2
</a>
      </li></ul>
  </div>
</section><section class="taxonomies row card component">
      <div class="card-header">
        <h2 class="card-title">
          <a href="https://euraxluo.gitee.io/blog/categories">Categories</a>
        </h2>
      </div>
      <div class="card-body">
        <div class="py-2"><a href="https://euraxluo.gitee.io/blog/categories/notes/" class="badge rounded post-taxonomy" title="notes">
            notes
          </a><a href="https://euraxluo.gitee.io/blog/categories/redis/" class="badge rounded post-taxonomy" title="redis">
            redis
          </a><a href="https://euraxluo.gitee.io/blog/categories/java/" class="badge rounded post-taxonomy" title="java">
            java
          </a><a href="https://euraxluo.gitee.io/blog/categories/%E7%88%AC%E8%99%AB/" class="badge rounded post-taxonomy" title="爬虫">
            爬虫
          </a><a href="https://euraxluo.gitee.io/blog/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" class="badge rounded post-taxonomy" title="读书笔记">
            读书笔记
          </a><a href="https://euraxluo.gitee.io/blog/categories/architecture-design/" class="badge rounded post-taxonomy" title="architecture design">
            architecture design
          </a></div>
      </div>
    </section><section class="taxonomies row card component">
      <div class="card-header">
        <h2 class="card-title">
          <a href="https://euraxluo.gitee.io/blog/series">Series</a>
        </h2>
      </div>
      <div class="card-body">
        <div class="py-2"><a href="https://euraxluo.gitee.io/blog/series/notes/" class="badge rounded post-taxonomy" title="notes">
            notes
          </a><a href="https://euraxluo.gitee.io/blog/series/redis/" class="badge rounded post-taxonomy" title="redis">
            redis
          </a><a href="https://euraxluo.gitee.io/blog/series/python/" class="badge rounded post-taxonomy" title="Python">
            Python
          </a><a href="https://euraxluo.gitee.io/blog/series/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" class="badge rounded post-taxonomy" title="读书笔记">
            读书笔记
          </a><a href="https://euraxluo.gitee.io/blog/series/java/" class="badge rounded post-taxonomy" title="Java">
            Java
          </a><a href="https://euraxluo.gitee.io/blog/series/jdbc/" class="badge rounded post-taxonomy" title="JDBC">
            JDBC
          </a></div>
      </div>
    </section><section class="taxonomies row card component">
      <div class="card-header">
        <h2 class="card-title">
          <a href="https://euraxluo.gitee.io/blog/tags">Tags</a>
        </h2>
      </div>
      <div class="card-body">
        <div class="py-2"><a href="https://euraxluo.gitee.io/blog/tags/notes/" class="badge rounded post-taxonomy" title="notes">
            notes
          </a><a href="https://euraxluo.gitee.io/blog/tags/redis/" class="badge rounded post-taxonomy" title="redis">
            redis
          </a><a href="https://euraxluo.gitee.io/blog/tags/python/" class="badge rounded post-taxonomy" title="Python">
            Python
          </a><a href="https://euraxluo.gitee.io/blog/tags/java/" class="badge rounded post-taxonomy" title="Java">
            Java
          </a><a href="https://euraxluo.gitee.io/blog/tags/%E7%88%AC%E8%99%AB/" class="badge rounded post-taxonomy" title="爬虫">
            爬虫
          </a><a href="https://euraxluo.gitee.io/blog/tags/architecture/" class="badge rounded post-taxonomy" title="architecture">
            architecture
          </a></div>
      </div>
    </section>
    
  </div>
</aside>
</div>
    </main><footer class="footer mt-auto py-3 text-center container-fluid"><nav class="social-links nav my-2 justify-content-center"><a class="nav-link social-link" href="mailto:Euraxluo@outlook.com" title="Email">
      <i class="fas fa-fw fa-2x fa-envelope"></i>
    </a><a class="nav-link social-link" target="_blank" href="https://github.com/Euraxluo" title="GitHub" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-github"></i>
      </a><a class="nav-link social-link" target="_blank" href="http://wpa.qq.com/msgrd?v=3&amp;uin=1793939176&amp;site=qq&amp;menu=yes" title="QQ" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-qq"></i>
      </a><a class="nav-link social-link" target="_blank" href="https://www.zhihu.com/people/euraxluo" title="Zhihu" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-zhihu"></i>
      </a></nav>
<div class="copyright mb-2">
  Copyright © 2016-2022 Euraxluo. All Rights Reserved.
</div>
</footer>
<script src="https://euraxluo.gitee.io/blog/js/main.min.f5f268f204e7613e51f9150bce6d4f2d2189da621a72acfba40e044dec7a4555.js" integrity="sha256-9fJo8gTnYT5R&#43;RULzm1PLSGJ2mIacqz7pA4ETex6RVU=" crossorigin="anonymous" defer></script><script src="https://euraxluo.gitee.io/blog/js/icons.min.826b24319105653072608014fe71c31646df55ab93979d2b425a4058ec850236.js" integrity="sha256-gmskMZEFZTByYIAU/nHDFkbfVauTl50rQlpAWOyFAjY=" crossorigin="anonymous" defer></script>
<script src="https://euraxluo.gitee.io/blog/js/viewer.min.ab1b33cce3db4c6867de13f5a9e9805215e4129a8096c3dd867ffe5731592320.js" integrity="sha256-qxszzOPbTGhn3hP1qemAUhXkEpqAlsPdhn/&#43;VzFZIyA=" crossorigin="anonymous" defer></script><script defer src="https://euraxluo.gitee.io/blog/js/katex.min.d3d447c86fbb3d49dd3cb98498e5a26ed6b0e182456a454b4de0aa3166089989.js" integrity="sha256-09RHyG&#43;7PUndPLmEmOWibtaw4YJFakVLTeCqMWYImYk=" crossorigin="anonymous"></script>

</body>
</html>
