<!doctype html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Git学习笔记 - Euraxluo Blog</title><link rel="apple-touch-icon" href="/images/favicons/apple-touch-icon.png" sizes="180x180">
<link rel="icon" href="/images/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
<link rel="icon" href="/images/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
<link rel="manifest" href="/images/favicons/manifest.json">
<link rel="icon" href="/images/favicons/favicon.ico">
<meta name="description" content="git" /><meta itemprop="name" content="Git学习笔记">
<meta itemprop="description" content="git">
<meta itemprop="datePublished" content="2018-07-11T00:00:00+00:00" />
<meta itemprop="dateModified" content="2018-07-11T00:00:00+00:00" />
<meta itemprop="wordCount" content="3388">



<meta itemprop="keywords" content="git," />
<meta property="og:title" content="Git学习笔记" />
<meta property="og:description" content="git" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/reading/git%E5%AD%A6%E4%B9%A0/" />
<meta property="article:published_time" content="2018-07-11T00:00:00+00:00" />
<meta property="article:modified_time" content="2018-07-11T00:00:00+00:00" /><meta property="og:site_name" content="Euraxluo Blog" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Git学习笔记"/>
<meta name="twitter:description" content="git"/>
<meta data-name="palette" content="blue"><link rel=stylesheet href="/css/bundle.min.31ae5fde579e9e77d7cd6ec43c26b9999d493df060fca9a54f9da00676116d7c.css" integrity="sha256-Ma5f3leennfXzW7EPCa5mZ1JPfBg/KmlT52gBnYRbXw=" crossorigin="anonymous"><script src="/js/bundle.min.6fb648ca3b465f463b5da4164d1a0fb5633d57cc6eaa89ef96ea4f622e163686.js" integrity="sha256-b7ZIyjtGX0Y7XaQWTRoPtWM9V8xuqonvlupPYi4WNoY=" crossorigin="anonymous"></script>
</head>
  <body><header><nav class="navbar fixed-top navbar-expand-xl">
  <div class="container">
    <a class="navbar-brand" href="/">
      <img class="logo" alt="Logo" src="https://gitee.com/Euraxluo/images/raw/master/picgo/profile.png" loading="lazy">Euraxluo</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-2 mb-2 mb-lg-0"><form class="search-bar d-flex mr-2" action="/search">
  <div class="input-group input-group-sm">
    <button class="btn btn-search disabled position-absolute left-0" type="submit"><i class="fas fa-fw fa-search"></i></button>
    <input class="form-control rounded-pill" id="searchQuery" name="q" type="search" aria-label="Search">
  </div>
</form></ul><ul class="navbar-nav mb-2 mb-lg-0 mr-2 ml-auto"><li class="nav-item">
          <a class="nav-link" href="/archives">
            <i class="fas fa-fw fa-file-archive"></i>归档
          </a>
        </li><li class="nav-item">
          <a class="nav-link" href="/categories">
            <i class="fas fa-fw fa-folder"></i>分类
          </a>
        </li><li class="nav-item">
          <a class="nav-link" href="/tags">
            <i class="fas fa-fw fa-tags"></i>标签
          </a>
        </li><li class="nav-item">
          <a class="nav-link" href="/series">
            <i class="fas fa-fw fa-columns"></i>专栏
          </a>
        </li><li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" id="navbarDropdown-dropdown" role="button" data-toggle="dropdown" aria-expanded="false">
            Repos
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown-dropdown"><li>
              <a class="dropdown-item"
                href="https://github.com/Euraxluo" target="_blank">
                <i class="fab fa-fw fa-github"></i>Euraxluo
              </a>
            </li><li>
              <a class="dropdown-item"
                href="https://github.com/Euraxluo/fastgrpc" target="_blank">
                <i class="fab fa-fw fa-github"></i>fastgrpc
              </a>
            </li><li>
              <a class="dropdown-item"
                href="https://github.com/Euraxluo/ProjectPractice" target="_blank">
                <i class="fab fa-fw fa-github"></i>ProjectPractice
              </a>
            </li><li>
              <a class="dropdown-item"
                href="https://github.com/Euraxluo/pyantv" target="_blank">
                <i class="fab fa-fw fa-github"></i>pyantv
              </a>
            </li><li>
              <a class="dropdown-item"
                href="https://github.com/Euraxluo/simple_pyvm" target="_blank">
                <i class="fab fa-fw fa-github"></i>simple-pythonvm
              </a>
            </li><li>
              <a class="dropdown-item"
                href="https://github.com/Euraxluo/verb" target="_blank">
                <i class="fab fa-fw fa-github"></i>verb
              </a>
            </li></ul>
        </li></ul>
      <ul class="navbar-nav d-flex flex-row mb-2 mb-lg-0"><li class="nav-item mr-2">
  <a class="nav-link" tabindex="0" data-trigger="click" id="languageSwitcher" data-toggle="popover"
    data-placement="bottom" data-target="#languagesPopoverBody" data-html="true">
    <i class="fas fa-fw fa-language" ></i>
  </a>
</li>
<script type="text/html" id="languagesPopoverBody">
  <ul class="languages list-group"><li class="language list-group-item">
      <a href="/en/">English</a></li><li class="language list-group-item active">简体中文</li><li class="language list-group-item">
      <a href="/zh-tw/">繁體中文</a></li></ul>
</script>
<li class="nav-item mr-2">
  <a class="nav-link" tabindex="0" data-trigger="click" id="paletteSwitcher" data-toggle="popover" data-placement="bottom" 
    data-target="#palettesPopoverBody" data-html="true">
    <i class="fas fa-fw fa-palette" ></i>
  </a>
</li>
<script type="text/html" id="palettesPopoverBody">
  <ul class="palettes list-group"><li id="palette-blue" class="palette list-group-item bg-blue">
      <a>蓝色</a>
    </li><li id="palette-blue-gray" class="palette list-group-item bg-blue-gray">
      <a>蓝灰色</a>
    </li><li id="palette-brown" class="palette list-group-item bg-brown">
      <a>棕色</a>
    </li><li id="palette-cyan" class="palette list-group-item bg-cyan">
      <a>青色</a>
    </li><li id="palette-green" class="palette list-group-item bg-green">
      <a>绿色</a>
    </li><li id="palette-indigo" class="palette list-group-item bg-indigo">
      <a>靛青色</a>
    </li><li id="palette-orange" class="palette list-group-item bg-orange">
      <a>橙色</a>
    </li><li id="palette-pink" class="palette list-group-item bg-pink">
      <a>粉色</a>
    </li><li id="palette-purple" class="palette list-group-item bg-purple">
      <a>紫色</a>
    </li><li id="palette-red" class="palette list-group-item bg-red">
      <a>红色</a>
    </li><li id="palette-teal" class="palette list-group-item bg-teal">
      <a>蓝绿色</a>
    </li><li id="palette-yellow" class="palette list-group-item bg-yellow">
      <a>黄色</a>
    </li></ul>
</script>

<li class="nav-item mr-2">
  <a class="nav-link" tabindex="0" data-trigger="click" id="fontSizeSwitcher" data-toggle="popover" data-placement="bottom" 
    data-target="#fontSizesPopoverBody" data-html="true">
    <i class="fas fa-fw fa-font" ></i>
  </a>
</li>
<script type="text/html" id="fontSizesPopoverBody">
  <form class="font-size-switcher-form">
    <label for="fontSize" class="form-label">字体大小</label>
    <input type="range" class="form-range" min="-2" max="2" id="fontSize">
  </form>
</script>
<form class="mode-switcher-form d-flex align-items-center">
  <div class="form-check form-switch">
    <input class="form-check-input" type="checkbox" id="modeSwitcher">
  </div>
</form>
</ul>
    </div>
  </div>
</nav>
</header>
<main role="main" class="container">
      <div class="row content">
<div class="col-md-8">
  <div class="container"><nav class="row" aria-label="breadcrumb">
  <ol class="breadcrumb surface"><li class="breadcrumb-item"><a href="/">主页</a></li><li class="breadcrumb-item"><a href="/posts/">posts</a></li><li class="breadcrumb-item"><a href="/posts/reading/">reading</a></li><li class="breadcrumb-item active">Git学习笔记</li></ol>
</nav><article class="post row surface">
  <h1 class="post-title my-3">Git学习笔记</h1><div class="post-meta mb-3">
  <span class="post-date mr-2">
    <i class="fas fa-fw fa-calendar-alt"></i>2018-07-11
  </span>
  <span class="poost-reading-time mr-2">
    <i class="fas fa-fw fa-coffee"></i>7 分钟阅读
  </span>
<a href="/categories/git/" class="post-taxonomy">#git</a><a href="/series/git/" class="post-taxonomy">#git</a><a href="/tags/git/" class="post-taxonomy">#git</a></div>
<div class="accordion accordion-flush surface post-toc position-sticky" id="accordionTOC">
  <div class="accordion-item">
    <div class="accordion-header" id="headingTOC" data-toggle="collapse" data-target="#collapseTOC" aria-expanded="true" aria-controls="collapseTOC">
      <i class="fas fa-fw fa-bars"></i>目录
    </div>
    <div id="collapseTOC" class="accordion-collapse collapse" aria-labelledby="headingTOC" data-parent="#accordionTOC">
      <div class="accordion-body mt-2">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#cd相对路径">cd相对路径</a></li>
    <li><a href="#创建和删除目录">创建和删除目录</a>
      <ul>
        <li><a href="#创建目录mkdir">创建目录mkdir</a></li>
        <li><a href="#删除目录rmdir">删除目录rmdir</a></li>
        <li><a href="#删除文件-rm--remove命令">删除文件 rm = remove命令</a></li>
      </ul>
    </li>
    <li><a href="#更新仓库">更新仓库</a>
      <ul>
        <li><a href="#注">注：</a></li>
      </ul>
    </li>
    <li><a href="#创建仓库">创建仓库</a></li>
    <li><a href="#删除仓库">删除仓库</a></li>
    <li><a href="#查看分支并切换">查看分支并切换</a></li>
    <li><a href="#查看当前的远程库">查看当前的远程库</a></li>
    <li><a href="#暂存修改">暂存修改</a></li>
    <li><a href="#git-文件过大">git 文件过大</a></li>
    <li><a href="#合并分支">合并分支</a>
      <ul>
        <li></li>
        <li><a href="#合并分支相关小结">合并分支相关小结</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </div>
    </div>
  </div>
</div><div class="post-content mb-3"><h1 id="git-学习笔记">Git 学习笔记</h1>
<h2 id="cd相对路径">cd相对路径</h2>
<p>cd    什么都不加 回到用户的家目录下
cd ~  回到root目录下
cd ..    进入上一级目录</p>
<p>cd -     返回上一次目录</p>
<p>cd .     当前目录</p>
<h2 id="创建和删除目录">创建和删除目录</h2>
<h3 id="创建目录mkdir">创建目录mkdir</h3>
<p>mkdir=make directory</p>
<p>mkdir dirname 创建目录</p>
<p>mkdir -p /etc/dirname/test/ 级联创建目录</p>
<p>mkdir -pv /etc/dirname/test/ 加上v可以看到创建的过程</p>
<h3 id="删除目录rmdir">删除目录rmdir</h3>
<p>rmdir=remove directory</p>
<p>rmdir dirname 可 删除空目录（下面无目录和文件）</p>
<h3 id="删除文件-rm--remove命令">删除文件 rm = remove命令</h3>
<p>rmdir -p 可级联删除一串目录，但是是从最开始的目录删起。比较危险，慎用</p>
<p>rm /tmp/ww/2/3/1.txt 会提示是否删除1.txt</p>
<p>rm -f /tmp/ww/2/3/1.txt 强制删除，不给提示</p>
<p>rm -r 级联删除目录，但是会提示是否删除，直接rm不能删目录</p>
<p>rm -rf 直接级联强制删除</p>
<p>rm -rfv 加上v显示删除过程</p>
<h2 id="更新仓库">更新仓库</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">
	<span style="color:#75715e">//在github上创建项目
</span><span style="color:#75715e"></span>
	<span style="color:#960050;background-color:#1e0010">$</span> git clone https:<span style="color:#75715e">//github/xx账号/xx项目.git//克隆到本地
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//编辑项目
</span><span style="color:#75715e"></span>
	<span style="color:#960050;background-color:#1e0010">$</span> git add .<span style="color:#75715e">//(将改动添加到暂存区)
</span><span style="color:#75715e"></span>
	<span style="color:#960050;background-color:#1e0010">$</span> git commit <span style="color:#960050;background-color:#1e0010">–</span>m<span style="color:#960050;background-color:#1e0010">”提交说明”</span> <span style="color:#75715e">//
</span><span style="color:#75715e"></span>
	<span style="color:#960050;background-color:#1e0010">$</span> git push origin master<span style="color:#75715e">//将本地更改推送到远程master分支
</span><span style="color:#75715e"></span>
</code></pre></div><p>实例：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">
git clone https:<span style="color:#75715e">//github.com/Euraxluo/-.git
</span><span style="color:#75715e"></span>
<span style="color:#75715e">//我更改了一个文件的名字
</span><span style="color:#75715e"></span>
cd .<span style="color:#f92672">/-</span><span style="color:#75715e">//选中我的文件目录
</span><span style="color:#75715e"></span>
git add <span style="color:#f92672">*</span>.py<span style="color:#75715e">//选中我要更新的文件
</span><span style="color:#75715e"></span>
git commit <span style="color:#f92672">-</span>m <span style="color:#e6db74">&#34;rename&#34;</span><span style="color:#75715e">//提交说明
</span><span style="color:#75715e"></span>
git push <span style="color:#f92672">-</span>u origin master<span style="color:#75715e">//推送
</span><span style="color:#75715e"></span>
<span style="color:#75715e">//这时，由于我的项目地址是https,而不是git，要求更新
</span><span style="color:#75715e"></span>
<span style="color:#75715e">//我打算更改路径
</span><span style="color:#75715e"></span>
</code></pre></div><p>如图</p>
<p><img class="img-fluid" src="image/111.png" alt="change url"  loading="lazy" />
</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">
git push <span style="color:#f92672">-</span>u origin master<span style="color:#75715e">//重新提交
</span><span style="color:#75715e"></span>
</code></pre></div><p>最后成功结果如图</p>
<p><img class="img-fluid" src="image/222.png" alt="final"  loading="lazy" />
</p>
<h3 id="注">注：</h3>
<p>1.提交：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">


git add <span style="color:#f92672">-</span>A <span style="color:#75715e">//提交所有变化
</span><span style="color:#75715e"></span>


git add <span style="color:#f92672">-</span>u  <span style="color:#75715e">//提交被修改(modified)和被删除(deleted)文件，不包括新文件(new)
</span><span style="color:#75715e"></span>
git add . <span style="color:#75715e">//提交新文件(new)和被修改(modified)文件，不包括被删除(deleted)文件
</span><span style="color:#75715e"></span>
</code></pre></div><p>2.删除：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">
<span style="color:#960050;background-color:#1e0010">$</span> git rm <span style="color:#960050;background-color:#1e0010">我的文件</span><span style="color:#75715e">//删除文件
</span><span style="color:#75715e"></span>
<span style="color:#960050;background-color:#1e0010">$</span> git rm <span style="color:#f92672">-</span>r <span style="color:#960050;background-color:#1e0010">我的文件夹</span><span style="color:#75715e">//删除文件夹
</span><span style="color:#75715e"></span>
<span style="color:#960050;background-color:#1e0010">$</span> git rm <span style="color:#f92672">-</span>h<span style="color:#75715e">//git rm [&lt;选项&gt;] [--] &lt;文件&gt;...
</span><span style="color:#75715e"></span>
    <span style="color:#f92672">-</span>n, <span style="color:#f92672">--</span>dry<span style="color:#f92672">-</span>run         <span style="color:#960050;background-color:#1e0010">演习</span>

    <span style="color:#f92672">-</span>q, <span style="color:#f92672">--</span>quiet           <span style="color:#960050;background-color:#1e0010">不列出删除的文件</span>

    <span style="color:#f92672">--</span>cached              <span style="color:#960050;background-color:#1e0010">只从索引区删除</span>

    <span style="color:#f92672">-</span>f, <span style="color:#f92672">--</span>force           <span style="color:#960050;background-color:#1e0010">忽略文件更新状态检查</span>

    <span style="color:#f92672">-</span>r                    <span style="color:#960050;background-color:#1e0010">允许递归删除</span>

    <span style="color:#f92672">--</span>ignore<span style="color:#f92672">-</span>unmatch      <span style="color:#960050;background-color:#1e0010">即使没有匹配，也以零状态退出</span>

</code></pre></div><h2 id="创建仓库">创建仓库</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">
    <span style="color:#960050;background-color:#1e0010">$</span> makdir <span style="color:#f92672">~/</span>hello<span style="color:#f92672">-</span>world    <span style="color:#75715e">//创建一个项目hello-world
</span><span style="color:#75715e"></span>
    <span style="color:#960050;background-color:#1e0010">$</span> cd<span style="color:#f92672">~/</span>hello<span style="color:#f92672">-</span>world       <span style="color:#75715e">//打开这个项目
</span><span style="color:#75715e"></span>
    <span style="color:#960050;background-color:#1e0010">$</span> git init             <span style="color:#75715e">//初始化 
</span><span style="color:#75715e"></span>
    <span style="color:#960050;background-color:#1e0010">$</span> touch README

    <span style="color:#960050;background-color:#1e0010">$</span> git add README        <span style="color:#75715e">//更新README文件
</span><span style="color:#75715e"></span>
    <span style="color:#960050;background-color:#1e0010">$</span> git commit<span style="color:#f92672">-</span>m <span style="color:#960050;background-color:#1e0010">&#39;</span>first commit<span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#75715e">//提交更新，并注释信息
</span><span style="color:#75715e"></span>
    <span style="color:#960050;background-color:#1e0010">$</span> git remote add origin git<span style="color:#960050;background-color:#1e0010">@</span>.<span style="color:#f92672">:</span>.git<span style="color:#75715e">//连接远程github项目  
</span><span style="color:#75715e"></span>
    <span style="color:#960050;background-color:#1e0010">$</span> git push <span style="color:#f92672">-</span>u origin master <span style="color:#75715e">//将本地项目更新到github项目上去
</span><span style="color:#75715e"></span>


</code></pre></div><h2 id="删除仓库">删除仓库</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">
git branch<span style="color:#75715e">//显示所有的本地分支
</span><span style="color:#75715e"></span>
<span style="color:#960050;background-color:#1e0010">结果：</span><span style="color:#f92672">*</span> master

ls <span style="color:#f92672">-</span>a<span style="color:#75715e">//找到目录下的.git
</span><span style="color:#75715e"></span>
<span style="color:#960050;background-color:#1e0010">结果：</span>.<span style="color:#f92672">/</span> ..<span style="color:#f92672">/</span> .git

rm <span style="color:#f92672">-</span>rf .git<span style="color:#75715e">//删除操作
</span><span style="color:#75715e"></span>
<span style="color:#960050;background-color:#1e0010">结果：</span>.git <span style="color:#960050;background-color:#1e0010">被删除，本地库删除成功</span>

</code></pre></div><h2 id="查看分支并切换">查看分支并切换</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">
<span style="color:#75715e"># 查看远程分支</span>

git branch -a 

<span style="color:#75715e"># 新建一个分支</span>

git checkout -b &lt;new branch name&gt; 

<span style="color:#75715e"># 查看本地分支</span>

git branch

<span style="color:#75715e"># 分支切换</span>

git checkout version



</code></pre></div><h2 id="查看当前的远程库">查看当前的远程库</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">
<span style="color:#75715e">#不带参数，列出已经存在的远程分支</span>

git remote



<span style="color:#75715e">#列出详细信息，在每一个名字后面列出其远程url</span>

<span style="color:#75715e">#此时， -v 选项(译注:此为 –verbose 的简写,取首字母),显示对应的克隆地址</span>

git remote -v | --verbose 

</code></pre></div><h2 id="暂存修改">暂存修改</h2>
<p><code>git stash</code> 把不想提交的修改暂存起来</p>
<p><code>git stash apply</code> 取回暂存修改</p>
<h2 id="git-文件过大">git 文件过大</h2>
<p>在频繁增删改、commit之后，.git文件会出现过大的情况。这个时候如何彻底清理以前的历史版本（也就是说只保留当前版本，不可能再回滚了）
方法是首先建立一个分支，然后将master版本给删除，再将当前分支重命名为master，再强制push到远程仓库即可。
具体步骤：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"> 第一步：
 <span style="color:#e6db74">`</span>git checkout --orphan latest_branch<span style="color:#e6db74">`</span>
 第二步：添加所有文件
 <span style="color:#e6db74">`</span>git add -A<span style="color:#e6db74">`</span>
 第三步：提交更改
 <span style="color:#e6db74">`</span>git commit -am <span style="color:#e6db74">&#34;commit message&#34;</span><span style="color:#e6db74">`</span>
 注意这里commit message是你提交的修改说明
 第四步：删除分支
 <span style="color:#e6db74">`</span>git branch -D master<span style="color:#e6db74">`</span>
 第五步：将当前分支重命名
 <span style="color:#e6db74">`</span>git branch -m master<span style="color:#e6db74">`</span>
 最后：强制更新存储库
 <span style="color:#e6db74">`</span>git push -f origin master<span style="color:#e6db74">`</span>
 就此完成。
</code></pre></div><p>要注意尽量不要往git上提交二进制文件，二进制文件是不按diff保存的，即使提交了也不要每次改一点然后再提交一遍。</p>
<p>一：常规办法
1.删除无用的分支</p>
<p><code>git branch -d &lt;branch_name&gt;</code>
2.删除无用的tag</p>
<p><code>git tag -d &lt;tag_name&gt;</code>
3.清理本地版本库</p>
<p><code>git gc --prune=now</code>
二：高级办法
注意高级办法会导致push冲突，需要强制提交，其他人pull也会遇到冲突，建议重新克隆.</p>
<p>1.完全重建版本库</p>
<pre><code>rm -rf .git
git init
git add .
git commit -m &quot;first commit&quot;
git remote add origin &lt;your_github_repo_url&gt;
git push -f -u origin master
</code></pre><p>2.有选择性的合并历史提交</p>
<p><code>git rebase -i &lt;first_commit&gt;</code>
会进入一个如下所示的文件</p>
<pre><code>pick ba07c7d add bootstrap theme and format import
pick 7d905b8 add newline at file last line
pick 037313c fn up_first_char rename to caps
pick 34e647e add fn of &amp;&amp; use for index.jsp
pick 0175f03 rename common include
pick 7f3f665 update group name &amp;&amp; update config
</code></pre><p>将想合并的提交的pick改成s，如</p>
<pre><code>pick ba07c7d add bootstrap theme and format import
pick 7d905b8 add newline at file last line
pick 037313c fn up_first_char rename to caps
s 34e647e add fn of &amp;&amp; use for index.jsp
pick 0175f03 rename common include
pick 7f3f665 update group name &amp;&amp; update config
</code></pre><p>这样第四个提交就会合并进入第三个提交。
等合并完提交之后再运行</p>
<pre><code>git push -f
git gc --prune=now
</code></pre><p>三.其他方法</p>
<ol>
<li>
<p><code>dh -d 1 -h</code> 查看哪个目录最大，确认是git目录</p>
</li>
<li>
<p><code>git rev-list --objects --all | grep &quot;$(git verify-pack -v .git/objects/pack/*.idx | sort -k 3 -n | tail -5 | awk '{print$1}')&quot;</code> 查看占用空间最大的5个文件</p>
</li>
<li>
<p>重写commit，删除大文件<code>git filter-branch --force --index-filter 'git rm -rf --cached --ignore-unmatch big-file.jar' --prune-empty --tag-name-filter cat -- --all</code> big-file.jar 换成之前查询出来的大文件名</p>
</li>
<li>
<p><code>git push origin master --force</code>以强制覆盖的方式推送repo</p>
</li>
<li>
<p>清理空间</p>
<pre><code>rm -rf .git/refs/original/
   
git reflog expire --expire=now --all
   
git gc --prune=now
</code></pre></li>
</ol>
<h2 id="合并分支">合并分支</h2>
<h4 id="创建与合并分支">创建与合并分支</h4>
<p>阅读: 10868325</p>
<hr>
<p>在<a href="https://www.liaoxuefeng.com/wiki/896043488029600/897013573512192" target="_blank">版本回退</a>
里，你已经知道，每次提交，Git都把它们串成一条时间线，这条时间线就是一个分支。截止到目前，只有一条时间线，在Git里，这个分支叫主分支，即<code>master</code>分支。<code>HEAD</code>严格来说不是指向提交，而是指向<code>master</code>，<code>master</code>才是指向提交的，所以，<code>HEAD</code>指向的就是当前分支。</p>
<p>一开始的时候，<code>master</code>分支是一条线，Git用<code>master</code>指向最新的提交，再用<code>HEAD</code>指向<code>master</code>，就能确定当前分支，以及当前分支的提交点：</p>
<p><img class="img-fluid" src="https://www.liaoxuefeng.com/files/attachments/919022325462368/0" alt="git-br-initial"  loading="lazy" />
</p>
<p>每次提交，<code>master</code>分支都会向前移动一步，这样，随着你不断提交，<code>master</code>分支的线也越来越长。</p>
<p>当我们创建新的分支，例如<code>dev</code>时，Git新建了一个指针叫<code>dev</code>，指向<code>master</code>相同的提交，再把<code>HEAD</code>指向<code>dev</code>，就表示当前分支在<code>dev</code>上：</p>
<p><img class="img-fluid" src="https://www.liaoxuefeng.com/files/attachments/919022363210080/0" alt="git-br-create"  loading="lazy" />
</p>
<p>你看，Git创建一个分支很快，因为除了增加一个<code>dev</code>指针，改改<code>HEAD</code>的指向，工作区的文件都没有任何变化！</p>
<p>不过，从现在开始，对工作区的修改和提交就是针对<code>dev</code>分支了，比如新提交一次后，<code>dev</code>指针往前移动一步，而<code>master</code>指针不变：</p>
<p><img class="img-fluid" src="https://www.liaoxuefeng.com/files/attachments/919022387118368/0" alt="git-br-dev-fd"  loading="lazy" />
</p>
<p>假如我们在<code>dev</code>上的工作完成了，就可以把<code>dev</code>合并到<code>master</code>上。Git怎么合并呢？最简单的方法，就是直接把<code>master</code>指向<code>dev</code>的当前提交，就完成了合并：</p>
<p><img class="img-fluid" src="https://www.liaoxuefeng.com/files/attachments/919022412005504/0" alt="git-br-ff-merge"  loading="lazy" />
</p>
<p>所以Git合并分支也很快！就改改指针，工作区内容也不变！</p>
<p>合并完分支后，甚至可以删除<code>dev</code>分支。删除<code>dev</code>分支就是把<code>dev</code>指针给删掉，删掉后，我们就剩下了一条<code>master</code>分支：</p>
<p><img class="img-fluid" src="https://www.liaoxuefeng.com/files/attachments/919022479428512/0" alt="git-br-rm"  loading="lazy" />
</p>
<p>真是太神奇了，你看得出来有些提交是通过分支完成的吗？</p>
<p>下面开始实战。</p>
<p>首先，我们创建<code>dev</code>分支，然后切换到<code>dev</code>分支：</p>
<pre><code>$ git checkout -b dev
Switched to a new branch 'dev'
</code></pre><p><code>git checkout</code>命令加上<code>-b</code>参数表示创建并切换，相当于以下两条命令：</p>
<pre><code>$ git branch dev
$ git checkout dev
Switched to branch 'dev'
</code></pre><p>然后，用<code>git branch</code>命令查看当前分支：</p>
<pre><code>$ git branch
* dev
  master
</code></pre><p><code>git branch</code>命令会列出所有分支，当前分支前面会标一个<code>*</code>号。</p>
<p>然后，我们就可以在<code>dev</code>分支上正常提交，比如对<code>readme.txt</code>做个修改，加上一行：</p>
<pre><code>Creating a new branch is quick.
</code></pre><p>然后提交：</p>
<pre><code>$ git add readme.txt 
$ git commit -m &quot;branch test&quot;
[dev b17d20e] branch test
 1 file changed, 1 insertion(+)
</code></pre><p>现在，<code>dev</code>分支的工作完成，我们就可以切换回<code>master</code>分支：</p>
<pre><code>$ git checkout master
Switched to branch 'master'
</code></pre><p>切换回<code>master</code>分支后，再查看一个<code>readme.txt</code>文件，刚才添加的内容不见了！因为那个提交是在<code>dev</code>分支上，而<code>master</code>分支此刻的提交点并没有变：</p>
<p><img class="img-fluid" src="https://www.liaoxuefeng.com/files/attachments/919022533080576/0" alt="git-br-on-master"  loading="lazy" />
</p>
<p>现在，我们把<code>dev</code>分支的工作成果合并到<code>master</code>分支上：</p>
<pre><code>$ git merge dev
Updating d46f35e..b17d20e
Fast-forward
 readme.txt | 1 +
 1 file changed, 1 insertion(+)
</code></pre><p><code>git merge</code>命令用于合并指定分支到当前分支。合并后，再查看<code>readme.txt</code>的内容，就可以看到，和<code>dev</code>分支的最新提交是完全一样的。</p>
<p>注意到上面的<code>Fast-forward</code>信息，Git告诉我们，这次合并是“快进模式”，也就是直接把<code>master</code>指向<code>dev</code>的当前提交，所以合并速度非常快。</p>
<p>当然，也不是每次合并都能<code>Fast-forward</code>，我们后面会讲其他方式的合并。</p>
<p>合并完成后，就可以放心地删除<code>dev</code>分支了：</p>
<pre><code>$ git branch -d dev
Deleted branch dev (was b17d20e).
</code></pre><p>删除后，查看<code>branch</code>，就只剩下<code>master</code>分支了：</p>
<pre><code>$ git branch
* master
</code></pre><p>因为创建、合并和删除分支非常快，所以Git鼓励你使用分支完成某个任务，合并后再删掉分支，这和直接在<code>master</code>分支上工作效果是一样的，但过程更安全。</p>
<h3 id="合并分支相关小结">合并分支相关小结</h3>
<p>查看分支：<code>git branch</code></p>
<p>创建分支：<code>git branch &lt;name&gt;</code></p>
<p>切换分支：<code>git checkout &lt;name&gt;</code></p>
<p>创建+切换分支：<code>git checkout -b &lt;name&gt;</code></p>
<p>合并某分支到当前分支：<code>git merge &lt;name&gt;</code>
如果遇到报错<code>$ git checkout dev warning: refname 'dev' is ambiguous.</code>
需要查看是否有同名指针:<code> git show-ref --heads --tags</code>
然后选择需要的指针合并</p>
<p>删除分支：<code>git branch -d &lt;name&gt;</code></p>
</div><div class="post-copyright mb-4">
  <h3>版权</h3><div class="post-cc">本作品采用 <a target="_blank" rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh">CC BY-NC-ND 4.0 <i class="fab fa-fw fa-creative-commons"></i><i class="fab fa-fw fa-creative-commons-by"></i><i class="fab fa-fw fa-creative-commons-nc"></i><i class="fab fa-fw fa-creative-commons-nd"></i></a> 授权。</div>
</div>
<div class="post-reward mb-4 text-center">
  <button type="button" class="btn btn-reward" data-toggle="modal" data-target="#rewardModal">
    <i class="fas fa-fw fa-medal"></i>打赏
  </button>
</div><div class="modal fade" id="rewardModal" tabindex="-1" aria-labelledby="rewardModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content surface">
      <div class="modal-header">
        <h5 class="modal-title" id="rewardModalLabel"><i class="fas fa-fw fa-medal"></i>打赏</h5>
        <a href="#" data-dismiss="modal" aria-label="Close"><i class="fas fa-fw fa-times"></i></a>
      </div>
      <div class="modal-body">
        <ul class="nav nav-tabs mb-3" role="tablist"><li class="nav-item" role="presentation">
            <a class="nav-link active" id="reward-alipay-tab" data-toggle="tab" href="#reward-alipay" role="tab" aria-controls="reward-alipay" aria-selected="true">
              <i class="fab fa-fw fa-alipay"></i>支付宝
            </a>
          </li><li class="nav-item" role="presentation">
            <a class="nav-link" id="reward-wechat-tab" data-toggle="tab" href="#reward-wechat" role="tab" aria-controls="reward-wechat" aria-selected="true">
              <i class="fab fa-fw fa-weixin"></i>微信
            </a>
          </li></ul>
        <div class="tab-content" id="rewardTabContent"><div class="tab-pane fade post-reward-content show active" id="reward-alipay" role="tabpanel" aria-labelledby="reward-alipay-tab">
            <img class="img-fluid post-reward-img" src="https://gitee.com/Euraxluo/images/raw/master/picgo/_alipay.jpg" loading="lazy" />
          </div><div class="tab-pane fade post-reward-content show" id="reward-wechat" role="tabpanel" aria-labelledby="reward-wechat-tab">
            <img class="img-fluid post-reward-img" src="https://gitee.com/Euraxluo/images/raw/master/picgo/_wechatpay.jpg" loading="lazy" />
          </div></div>
      </div>
    </div>
  </div>
</div><div class="post-navs d-flex mb-3 justify-content-between">
  <div class="post-nav w-50"><div class="prev-post">
      <a href="/posts/driverless/apollo%E6%9E%B6%E6%9E%84/">Apollo无人车架构</a>
    </div></div>
  <div class="post-nav flex-row-reverse"><div class="next-post">
      <a href="/posts/algorithm/%E6%95%B0%E7%BB%84/">数组</a>
    </div></div>
</div></article><div class="post-comments surface row"><script src="https://utteranc.es/client.js"
  repo="Euraxluo/Euraxluo.github.io"
  issue-term="pathname"
  label="✨💬✨"
  theme="github-dark"
  crossorigin="anonymous"
  async>
</script></div></div>
</div><aside class="col-lg-4 sidebar d-flex">
  <div class="container"><section class="profile surface row">
  <div class="col-xl-6 d-flex align-items-center justify-content-center">
    <img class="profile-avatar img-fluid" src="https://gitee.com/Euraxluo/images/raw/master/picgo/profile.png" alt="Euraxluo" loading="lazy">
  </div>
  <div class="col-xl-6">
    <h5 class="profile-name my-2">Euraxluo</h5><div class="profile-bio mb-2">Gopher, Python, Java, IT Engineer.</div><div class="profile-company mb-2"><i class="fas fa-fw fa-building"></i>dml-express</div><div class="profile-location mb-2"><i class="fas fa-fw fa-map-marker-alt"></i>Chengdu</div></div>
</section><section class="featured-posts row surface">
  <h4>精选文章</h4>
  <ul><li><a href="/posts/note/java%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/">java面试笔记</a></li><li><a href="/posts/note/make-lispluo/">Make My LIsp NAME lispluo</a></li><li><a href="/posts/note/rust%E5%AD%A6%E4%B9%A0/">rust学习</a></li><li><a href="/posts/note/scala%E5%85%A5%E9%97%A8/">Scala入门</a></li><li><a href="/posts/note/slam/">SLAM</a></li></ul>
</section><section class="recent-posts row surface">
  <h4>最近文章</h4>
  <ul><li><a href="/posts/shortcodes/alert/">Alert Shortcode</a></li><li><a href="/posts/shortcodes/bilibili/">Bilibili Shortcode</a></li><li><a href="/posts/reading/cleancode/">CleanCode读书笔记</a></li><li><a href="/posts/shortcodes/codepen/">CodePen Shortcode</a></li><li><a href="/posts/shortcodes/jsfiddle/">JSFiddle Shortcode</a></li></ul>
</section>
<section class="taxonomy-categories row surface">
  <h4>
    <a href="/categories">分类</a>
  </h4>
  <div><a href="/categories/notes/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="notes">
      notes <span class="badge rounded-pill">23</span>
    </a><a href="/categories/redis/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="redis">
      redis <span class="badge rounded-pill">10</span>
    </a><a href="/categories/shortcode/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="Shortcode">
      Shortcode <span class="badge rounded-pill">10</span>
    </a><a href="/categories/java/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="java">
      java <span class="badge rounded-pill">8</span>
    </a><a href="/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="读书笔记">
      读书笔记 <span class="badge rounded-pill">5</span>
    </a><a href="/categories/%E7%88%AC%E8%99%AB/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="爬虫">
      爬虫 <span class="badge rounded-pill">4</span>
    </a><a href="/categories/nlp/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="NLP">
      NLP <span class="badge rounded-pill">3</span>
    </a><a href="/categories/ros/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="ROS">
      ROS <span class="badge rounded-pill">3</span>
    </a><a href="/categories/shell/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="Shell">
      Shell <span class="badge rounded-pill">2</span>
    </a><a href="/categories/tensorflow/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="TensorFlow">
      TensorFlow <span class="badge rounded-pill">2</span>
    </a></div>
</section><section class="taxonomy-series row surface">
  <h4>
    <a href="/series">专栏</a>
  </h4>
  <div><a href="/series/notes/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="notes">
      notes <span class="badge rounded-pill">23</span>
    </a><a href="/series/redis/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="redis">
      redis <span class="badge rounded-pill">10</span>
    </a><a href="/series/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="读书笔记">
      读书笔记 <span class="badge rounded-pill">5</span>
    </a><a href="/series/pathon/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="Pathon">
      Pathon <span class="badge rounded-pill">4</span>
    </a><a href="/series/java/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="Java">
      Java <span class="badge rounded-pill">3</span>
    </a><a href="/series/jdbc/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="JDBC">
      JDBC <span class="badge rounded-pill">3</span>
    </a><a href="/series/nlp/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="NLP">
      NLP <span class="badge rounded-pill">3</span>
    </a><a href="/series/ros/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="ROS">
      ROS <span class="badge rounded-pill">3</span>
    </a><a href="/series/shell/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="Shell">
      Shell <span class="badge rounded-pill">2</span>
    </a><a href="/series/tensorflow/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="TensorFlow">
      TensorFlow <span class="badge rounded-pill">2</span>
    </a></div>
</section><section class="taxonomy-tags row surface">
  <h4>
    <a href="/tags">标签</a>
  </h4>
  <div><a href="/tags/notes/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="notes">
      notes <span class="badge rounded-pill">23</span>
    </a><a href="/tags/redis/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="redis">
      redis <span class="badge rounded-pill">10</span>
    </a><a href="/tags/java/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="Java">
      Java <span class="badge rounded-pill">4</span>
    </a><a href="/tags/pathon/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="Pathon">
      Pathon <span class="badge rounded-pill">4</span>
    </a><a href="/tags/%E7%88%AC%E8%99%AB/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="爬虫">
      爬虫 <span class="badge rounded-pill">4</span>
    </a><a href="/tags/jdbc/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="JDBC">
      JDBC <span class="badge rounded-pill">3</span>
    </a><a href="/tags/nlp/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="NLP">
      NLP <span class="badge rounded-pill">3</span>
    </a><a href="/tags/ros/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="ROS">
      ROS <span class="badge rounded-pill">3</span>
    </a><a href="/tags/python/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="python">
      python <span class="badge rounded-pill">2</span>
    </a><a href="/tags/shell/" class="post-taxonomy rounded-pill btn btn-sm mr-2 mb-2" title="Shell">
      Shell <span class="badge rounded-pill">2</span>
    </a></div>
</section></div>
</aside>
</div>
    </main><footer class="footer mt-auto py-3 text-center container"><nav class="social-links nav my-2 justify-content-center"><li class="nav-item">
    <a class="nav-link social-link" href="mailto:Euraxluo@outlook.com" title="Email">
      <i class="fas fa-fw fa-2x fa-envelope"></i>
    </a>
  </li><li class="nav-item">
      <a class="nav-link social-link" target="_blank" href="https://github.com/Euraxluo" title="Github">
        <i class="fab fa-fw fa-2x fa-github"></i>
      </a>
    </li><li class="nav-item">
      <a class="nav-link social-link" target="_blank" href="http://wpa.qq.com/msgrd?v=3&amp;uin=1793939176&amp;site=qq&amp;menu=yes" title="Qq">
        <i class="fab fa-fw fa-2x fa-qq"></i>
      </a>
    </li><li class="nav-item">
      <a class="nav-link social-link" target="_blank" href="https://www.zhihu.com/people/euraxluo" title="Zhihu">
        <i class="fab fa-fw fa-2x fa-zhihu"></i>
      </a>
    </li></nav>
<div class="copyright mb-2">
  Copyright © 2016-2021 Euraxluo. All Rights Reserved.
</div>
<script>
  window.parent.postMessage(window.location.href, "*");
</script><div class="powered-by mb-2">
  Powered by <a href="https://gohugo.io" target="_blank">Hugo</a> and the <a href="https://github.com/razonyang/hugo-theme-bootstrap" target="_blank">Bootstrap</a> theme.
</div></footer>
<a id="btnScrollToTop" class="btn-scroll-to-top">
  <i class="fas fa-fw fa-chevron-circle-up fa-2x"></i>
</a>
</body>
</html>
