<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Redis Cluster 3 - Euraxluo Blog</title><link rel=apple-touch-icon href=/images/icons/icon-180x180.png sizes=180x180><link rel=icon href=/images/icons/icon-32x32.png sizes=32x32 type=image/png><link rel=icon href=/images/icons/icon-16x16.png sizes=16x16 type=image/png><link rel=icon href=/images/icons/favicon.ico><link rel=manifest href=/manifest.json><meta name=keywords content><meta name=description content="Redis Cluter"><meta itemprop=name content="Redis Cluster 3"><meta itemprop=description content="Redis Cluter"><meta itemprop=datePublished content="2019-03-10T00:00:00+00:00"><meta itemprop=dateModified content="2019-03-10T00:00:00+00:00"><meta itemprop=wordCount content="342"><meta itemprop=keywords content="redis,"><meta property="og:title" content="Redis Cluster 3"><meta property="og:description" content="Redis Cluter"><meta property="og:type" content="article"><meta property="og:url" content="/posts/redis/rediscluster-3/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-03-10T00:00:00+00:00"><meta property="article:modified_time" content="2019-03-10T00:00:00+00:00"><meta property="og:see_also" content="/posts/redis/redis%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/"><meta property="og:see_also" content="/posts/redis/redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><meta property="og:see_also" content="/posts/redis/rediscluster-1/"><meta property="og:see_also" content="/posts/redis/rediscluster-2/"><meta property="og:see_also" content="/posts/redis/redissentinel/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Redis Cluster 3"><meta name=twitter:description content="Redis Cluter"><link rel=stylesheet href=/css/main.min.29f9b537bf546fdc11e6e11f92ddd52ea0bd1eefa2228b828bc3b750c66763b0.css integrity="sha256-Kfm1N79Ub9wR5uEfkt3VLqC9Hu+iIouCi8O3UMZnY7A=" crossorigin=anonymous><link rel=stylesheet href=/css/katex.min.d080a89e03e1eb850f547d835c186b4273f69879aa497eb8b0e88c1578bf1f0b.css integrity="sha256-0ICongPh64UPVH2DXBhrQnP2mHmqSX64sOiMFXi/Hws=" crossorigin=anonymous><link rel=stylesheet href=/css/viewer.min.3d228794bcedbbfa0412beb8fbc1ec6973202945e42af7004f742a4d7bd620ab.css integrity="sha256-PSKHlLztu/oEEr64+8HsaXMgKUXkKvcAT3QqTXvWIKs=" crossorigin=anonymous></head><body><script>const items=["mode","palette"];items.forEach(function(e){const t=localStorage.getItem("hbs-"+e);t&&document.body.parentElement.setAttribute("data-"+e,t)})</script><header><nav class="navbar top-app-bar top-app-bar-expand-lg fixed-top"><div class=container-fluid><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<i class="fas fa-bars"></i>
</button><a class="navbar-brand me-3" href=/><img class=logo alt=Logo src=https://euraxluo.github.io/images/picgo/profile.png loading=lazy>
Euraxluo</a>
<button class=navbar-social-share type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasSocialShare aria-controls=offcanvasSocialShare aria-label="Toggle social share">
<i class="fas fa-share-alt"></i></button><div class="offcanvas offcanvas-bottom surface" tabindex=-1 id=offcanvasSocialShare aria-labelledby=offcanvasSocialShare><div class=offcanvas-header><h3 class=offcanvas-title>Share</h3><button type=button class="btn btn-sm btn-outline-primary" data-bs-dismiss=offcanvas aria-label=Close>
<i class="fas fa-times"></i></button></div><div class=offcanvas-body><a class="btn btn-sm btn-outline-primary social-share-button" rel="noopener noreferrer" aria-label="Twitter Share Button" target=_blank href="https://twitter.com/intent/tweet?title=Redis%20Cluster%203&url=%2fposts%2fredis%2frediscluster-3%2f"><i class="fab fa-fw fa-twitter"></i> Twitter</a>
<a class="btn btn-sm btn-outline-primary social-share-button" rel="noopener noreferrer" aria-label="Facebook Share Button" target=_blank href="https://www.facebook.com/sharer/sharer.php?u=%2fposts%2fredis%2frediscluster-3%2f"><i class="fab fa-fw fa-facebook-f"></i> Facebook</a></div></div><button class=navbar-settings type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasSettings aria-controls=offcanvasSettings aria-label="Toggle settings">
<i class="fas fa-ellipsis-v"></i></button><div class="offcanvas offcanvas-end surface h-100" tabindex=-1 id=offcanvasSettings aria-labelledby=offcanvasSettings><div class=offcanvas-header><h3 class=offcanvas-title>Settings</h3><button type=button class="btn btn-sm btn-outline-primary" data-bs-dismiss=offcanvas aria-label=Close>
<i class="fas fa-times"></i></button></div><div class="offcanvas-body d-flex flex-column"><section class=setting><form class=row><div class=col-auto><label><i class="fas fa-fw fa-adjust"></i> Mode</label></div><div class="col-auto ms-auto"><div class="form-check form-switch"><input class=form-check-input type=checkbox id=modeSwitcher></div></div></form></section><section class=setting><form class="font-size-switcher-form row"><div class=col-auto><label for=fontSize class=form-label><i class="fas fa-fw fa-font"></i> Font Size</label></div><div class="col-auto ms-auto"><input type=range class=form-range min=-2 max=2 id=fontSize></div></form></section><section class="setting palettes"><form class=row><div class=col-auto><label><i class="fas fa-fw fa-palette"></i> Palette</label></div><div class="col-auto ms-auto"><a id=btnPalette class="btn btn-sm btn-outline-primary" role=button aria-label=palettePicker><i class="fas fa-eye-dropper"></i></a></div></form><div class="mt-2 d-flex visually-hidden" id=palettePicker><button type=button id=palette-blue aria-label=Blue class="btn btn-sm palette" data-palette=blue>
</button><button type=button id=palette-blue-gray aria-label="Blue Gray" class="btn btn-sm palette" data-palette=blue-gray>
</button><button type=button id=palette-brown aria-label=Brown class="btn btn-sm palette" data-palette=brown>
</button><button type=button id=palette-cyan aria-label=Cyan class="btn btn-sm palette" data-palette=cyan>
</button><button type=button id=palette-green aria-label=Green class="btn btn-sm palette" data-palette=green>
</button><button type=button id=palette-indigo aria-label=Indigo class="btn btn-sm palette" data-palette=indigo>
</button><button type=button id=palette-orange aria-label=Orange class="btn btn-sm palette" data-palette=orange>
</button><button type=button id=palette-pink aria-label=Pink class="btn btn-sm palette" data-palette=pink>
</button><button type=button id=palette-purple aria-label=Purple class="btn btn-sm palette" data-palette=purple>
</button><button type=button id=palette-red aria-label=Red class="btn btn-sm palette" data-palette=red>
</button><button type=button id=palette-teal aria-label=Teal class="btn btn-sm palette" data-palette=teal>
</button><button type=button id=palette-yellow aria-label=Yellow class="btn btn-sm palette" data-palette=yellow></button></div></section><section class="setting actions d-flex justify-content-center mt-auto"><a role=button class="action action-reload-page"><span class=action-icon><i class="fas fa-2x fa-redo-alt"></i></span> Reload</a>
<a role=button class="action action-copy-url"><span class=action-icon><i class="fas fa-2x fa-link"></i></span> Copy URL</a></section></div></div><div class="collapse navbar-collapse" tabindex=-1 id=navbarSupportedContent aria-labelledby=navbarSupportedContent><form class="search-bar my-1" action=/search><div class="input-group input-group-sm"><span class="btn btn-search disabled position-absolute left-0"><i class="fas fa-fw fa-search"></i></span>
<input class="form-control rounded-pill" name=q type=search aria-label=Search></div></form><ul class="navbar-nav ms-auto"><li class=nav-item><a class=nav-link href=/archives/><i class="fas fa-fw fa-file-archive"></i>timeline</a></li><li class=nav-item><a class=nav-link href=/categories/><i class="fas fa-fw fa-folder"></i>category</a></li><li class=nav-item><a class=nav-link href=/tags/><i class="fas fa-fw fa-tags"></i>tags</a></li><li class=nav-item><a class=nav-link href=/series/><i class="fas fa-fw fa-columns"></i>series</a></li><li class="nav-item dropdown"><a class=nav-link id=navbarDropdownRepos role=button data-bs-toggle=dropdown aria-expanded=false><i class="fab fa-fw fa-github"></i>Repos</a><ul class=dropdown-menu aria-labelledby=navbarDropdownRepos><li><a class=dropdown-item href=https://github.com/BreezeTeam/cache target=_blank rel="noopener noreferrer"><i class="fab fa-fw fa-github"></i>cache</a></li><li><a class=dropdown-item href=https://github.com/BreezeTeam/distance_matrix target=_blank rel="noopener noreferrer"><i class="fab fa-fw fa-github"></i>distance_matrix</a></li><li><a class=dropdown-item href=https://github.com/Euraxluo target=_blank rel="noopener noreferrer"><i class="fab fa-fw fa-github"></i>Euraxluo</a></li><li><a class=dropdown-item href=https://github.com/Euraxluo/IMOMD-RRTStar-rs target=_blank rel="noopener noreferrer"><i class="fab fa-fw fa-github"></i>IMOMD-RRTStar-rs</a></li><li><a class=dropdown-item href=https://github.com/BreezeTeam/lang target=_blank rel="noopener noreferrer"><i class="fab fa-fw fa-github"></i>lang</a></li><li><a class=dropdown-item href=https://github.com/Euraxluo/LKH-rs target=_blank rel="noopener noreferrer"><i class="fab fa-fw fa-github"></i>LKH-rs</a></li><li><a class=dropdown-item href=https://github.com/BreezeTeam/scheduler target=_blank rel="noopener noreferrer"><i class="fab fa-fw fa-github"></i>scheduler</a></li><li><a class=dropdown-item href=https://github.com/Euraxluo/simplegrad target=_blank rel="noopener noreferrer"><i class="fab fa-fw fa-github"></i>simplegrad</a></li><li><a class=dropdown-item href=https://github.com/Euraxluo/verb target=_blank rel="noopener noreferrer"><i class="fab fa-fw fa-github"></i>verb</a></li><li><a class=dropdown-item href=https://github.com/BreezeTeam/web target=_blank rel="noopener noreferrer"><i class="fab fa-fw fa-github"></i>web</a></li></ul></li></ul></div></div></nav></header><main role=main class=container-fluid><div class="row content"><div class=col-lg-8><div class=container><article class="row card component mb-4 post"><div class=post-panel-wrapper><div class="d-flex flex-column component rounded post-panel"><a id=sidebarToggler class="action d-none d-lg-block" role=button title="Sidebar toggler"><i class="fas fa-fw fa-expand-alt" data-fa-transform=rotate-45></i></a>
<a class="action btn-reward" role=button data-bs-toggle=modal data-bs-target=#rewardModal title="Buy me a coffee"><i class="fas fa-fw fa-coffee"></i></a>
<a class=action href=#post-copyright role=button aria-label=Copyright title=Copyright><i class="fas fa-fw fa-copyright"></i></a>
<a class=action href=#post-comments role=button aria-label=Comments title=Comments><i class="fas fa-fw fa-comments"></i></a>
<a class=action data-bs-toggle=offcanvas href=#offcanvasTOC aria-controls=offcanvasTOC role=button title="Table of contents"><i class="fas fa-fw fa-list-alt"></i></a></div></div><div class=card-header><h1 class="card-title post-title">Redis Cluster 3</h1></div><div class=card-body><div class=post-meta><span class=post-date title="created on 2019-03-10 08:00:00 +0800 CST.">2019-03-10
</span><span class=post-reading-time>2 min read
</span><span class=post-taxonomies><a href=/categories/redis/ class="badge rounded-pill post-taxonomy">redis</a><a href=/series/redis/ class="badge rounded-pill post-taxonomy">redis</a><a href=/tags/redis/ class="badge rounded-pill post-taxonomy">redis</a></span></div><div class="offcanvas offcanvas-end surface h-100" tabindex=-1 id=offcanvasTOC aria-labelledby=offcanvasTOCLabel><div class=offcanvas-header><h2 class=offcanvas-title id=offcanvasTOCLabel>Table Of Contents</h5><button type=button class="btn btn-sm btn-outline-primary" data-bs-dismiss=offcanvas aria-label=Close>
<i class="fas fa-times"></i></button></div><div class=offcanvas-body><nav id=TableOfContents><ul><li><a href=#rediscluster>RedisCluster</a></li><li><a href=#客户端使用>客户端使用</a><ul><li><a href=#moved重定向>moved重定向</a></li><li><a href=#ask重定向>ASK重定向</a></li><li><a href=#两者的区别>两者的区别</a></li></ul></li><li><a href=#smart客户端>smart客户端</a><ul><li><a href=#执行命令>执行命令</a></li><li><a href=#jiediscluster使用>jiedisCluster使用</a></li><li><a href=#多节点命令实现>多节点命令实现</a></li></ul></li><li><a href=#redis-cluster的故障转移>Redis Cluster的故障转移</a><ul><li><a href=#故障发现>故障发现</a></li><li><a href=#故障恢复>故障恢复</a></li></ul></li><li><a href=#rediscluster开发运维>RedisCluster开发运维</a><ul><li><a href=#集群完整性>集群完整性</a></li><li><a href=#带宽>带宽</a></li><li><a href=#pubsub广播>Pub/Sub广播</a></li><li><a href=#集群倾斜>集群倾斜</a></li><li><a href=#读写分离>读写分离</a></li><li><a href=#数据迁移>数据迁移</a></li><li><a href=#集群vs单机>集群vs单机</a></li></ul></li><li><a href=#总结>总结</a></li></ul></nav></div></div><div class="post-content mb-3"><h2 id=rediscluster>RedisCluster<a class="anchor ms-1" href=#rediscluster><i class="fas fa-link"></i></a></h2><h2 id=客户端使用>客户端使用<a class="anchor ms-1" href=#客户端使用><i class="fas fa-link"></i></a></h2><h3 id=moved重定向>moved重定向<a class="anchor ms-1" href=#moved重定向><i class="fas fa-link"></i></a></h3><ol><li><p>对任意节点发送键命令</p></li><li><p>节点会计算槽和对应节点确定这个键是否指向自身</p></li><li><p>如果指向自身，就执行命令，返回key所在的槽</p></li><li><p>否则就回复moved异常，客户端拿到这个moved后，重定向节点，重新发送命令</p></li></ol><h3 id=ask重定向>ASK重定向<a class="anchor ms-1" href=#ask重定向><i class="fas fa-link"></i></a></h3><p>解决槽迁移时客户端的查询问题</p><ol><li><p>对源节点发送键命令</p></li><li><p>节点发现正在进行槽迁移，回复客户端ask转向</p></li><li><p>客户端对目标节点Asking，发送命令</p></li><li><p>目标节点返回响应结果</p></li></ol><h3 id=两者的区别>两者的区别<a class="anchor ms-1" href=#两者的区别><i class="fas fa-link"></i></a></h3><ul><li><p>两者都是客户端重定向</p></li><li><p>moved：槽已经确定迁移</p></li><li><p>ask：槽还在迁移中</p></li></ul><h2 id=smart客户端>smart客户端<a class="anchor ms-1" href=#smart客户端><i class="fas fa-link"></i></a></h2><p>目标：追求性能（不能使用代理模式）</p><ol><li><p>从集群中选取一个可运行节点，使用cluster slots 初始化槽和节点映射</p></li><li><p>将cluster slots的结果映射到本地，为每个节点都创建一个连接池</p></li><li><p>准备执行命令</p></li></ol><h3 id=执行命令>执行命令<a class="anchor ms-1" href=#执行命令><i class="fas fa-link"></i></a></h3><ol><li><p>通过key哈希模16383，得到slot，通过本地映射得到节点，再通过连接池去连接</p></li><li><p>如果连接出错，可能槽迁移，也可能是连接异常，如果槽迁移，那么</p></li><li><p>我们随机访问一个活跃节点，节点会返回moved异常</p></li><li><p>我们得到槽迁移的结果，更新我们的slot和nodes的映射（确定槽迁移）</p></li><li><p>然后再去连接目标节点</p></li><li><p>如果命令发送多次未成功，显示异常<code>Too many cluster redirection</code></p></li></ol><h3 id=jiediscluster使用>jiedisCluster使用<a class="anchor ms-1" href=#jiediscluster使用><i class="fas fa-link"></i></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>
</span></span><span style=display:flex><span>Set<span style=color:#f92672>&lt;</span>HostAndPort<span style=color:#f92672>&gt;</span> nodeList <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> HashSet<span style=color:#f92672>&lt;</span>HostAndPort<span style=color:#f92672>&gt;();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>nodeList<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> HostAndPort<span style=color:#f92672>(</span>HOST1<span style=color:#f92672>,</span>PORT1<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>nodeList<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> HostAndPort<span style=color:#f92672>(</span>HOST2<span style=color:#f92672>,</span>PORT2<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>nodeList<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> HostAndPort<span style=color:#f92672>(</span>HOST3<span style=color:#f92672>,</span>PORT3<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>nodeList<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> HostAndPort<span style=color:#f92672>(</span>HOST4<span style=color:#f92672>,</span>PORT4<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>nodeList<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> HostAndPort<span style=color:#f92672>(</span>HOST5<span style=color:#f92672>,</span>PORT5<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>nodeList<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> HostAndPort<span style=color:#f92672>(</span>HOST6<span style=color:#f92672>,</span>PORT6<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>JedisCluster redisCluster <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> JedisCluster<span style=color:#f92672>(</span>nodeList<span style=color:#f92672>,</span>timeout<span style=color:#f92672>,</span>poolConfig<span style=color:#f92672>);</span>
</span></span></code></pre></div><h4 id=tips>TIPS<a class="anchor ms-1" href=#tips><i class="fas fa-link"></i></a></h4><ol><li><p>单例：内置了所有节点的连接池，并可以用来做故障转移</p></li><li><p>无需手动借还连接池</p></li><li><p>合理设置commons-pool</p></li></ol><h4 id=整合spring>整合spring<a class="anchor ms-1" href=#整合spring><i class="fas fa-link"></i></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//工厂
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> redis.client.jedis.JedisCluster<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>JedisClusterFactory</span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> JedisCluster jedisCluster<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> hostPoetList<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> timeout<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Logger logger <span style=color:#f92672>=</span> LoggerFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>getLogger</span><span style=color:#f92672>(</span>JedisClusterFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>init</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        JedisPoolConfig jedisPoolConfig <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> JedisPoolConfig<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Set<span style=color:#f92672>&lt;</span>HostAndPort<span style=color:#f92672>&gt;</span> nodeSet <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> HashSet<span style=color:#f92672>&lt;</span>HostAndPort<span style=color:#f92672>&gt;();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span><span style=color:#f92672>(</span>String hostPort<span style=color:#f92672>:</span>hostPortList<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            String<span style=color:#f92672>[]</span> arr <span style=color:#f92672>=</span> hostPort<span style=color:#f92672>.</span><span style=color:#a6e22e>split</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;:&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>arr<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span> <span style=color:#f92672>!=</span> 2<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>continue</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            nodeSet<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> HostAndPort<span style=color:#f92672>(</span>arr<span style=color:#f92672>[</span>0<span style=color:#f92672>],</span>Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>parseInt</span><span style=color:#f92672>(</span>arr<span style=color:#f92672>[</span>1<span style=color:#f92672>])));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            jedisCluster <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> JedisCluster<span style=color:#f92672>(</span>nodeSet<span style=color:#f92672>,</span>timeout<span style=color:#f92672>,</span>jedisPoolConfig<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span><span style=color:#66d9ef>catch</span><span style=color:#f92672>(</span>Exception e<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            logger<span style=color:#f92672>.</span><span style=color:#a6e22e>error</span><span style=color:#f92672>(</span>e<span style=color:#f92672>.</span><span style=color:#a6e22e>getMessage</span><span style=color:#f92672>(),</span>e<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>destroy</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>jedisCluster <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>try</span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                jedisCluster<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span><span style=color:#66d9ef>catch</span><span style=color:#f92672>(</span>IOException e<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                logger<span style=color:#f92672>.</span><span style=color:#a6e22e>error</span><span style=color:#f92672>(</span>e<span style=color:#f92672>.</span><span style=color:#a6e22e>getMessage</span><span style=color:#f92672>(),</span>e<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> JedisCluster <span style=color:#a6e22e>getJedisCluster</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> jedisCluster<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setHostPortList</span><span style=color:#f92672>(</span>List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> hostPortList<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>hostPortList</span> <span style=color:#f92672>=</span> hostPortList<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setTomeout</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> timeout<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>timeout</span> <span style=color:#f92672>=</span> timeout<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;jedisClusterFactory&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;path/to/factoryClass&#34;</span> <span style=color:#a6e22e>init-method=</span><span style=color:#e6db74>&#34;init&#34;</span> <span style=color:#a6e22e>destory-method=</span><span style=color:#e6db74>&#34;destory&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/bean&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;jedisCluster&#34;</span> <span style=color:#a6e22e>factory-bean=</span><span style=color:#e6db74>&#34;jedisClusterFactory&#34;</span> <span style=color:#a6e22e>factory-method=</span><span style=color:#e6db74>&#34;getJedisCluster&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/bean&gt;</span>
</span></span></code></pre></div><h3 id=多节点命令实现>多节点命令实现<a class="anchor ms-1" href=#多节点命令实现><i class="fas fa-link"></i></a></h3><p>伪代码</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>
</span></span><span style=display:flex><span>Map<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>,</span>JedisPool<span style=color:#f92672>&gt;</span> jedisPoolMap <span style=color:#f92672>=</span> jedisCluster<span style=color:#f92672>.</span><span style=color:#a6e22e>getClusterNodes</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span><span style=color:#f92672>(</span>Entry<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>,</span>JedisPool<span style=color:#f92672>&gt;</span>entry<span style=color:#f92672>:</span>jedisPoolMap<span style=color:#f92672>.</span><span style=color:#a6e22e>entrySet</span><span style=color:#f92672>()){</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//获取每个节点的Jedis连接
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    Jedis<span style=color:#f92672>.</span><span style=color:#a6e22e>jedis</span> <span style=color:#f92672>=</span> entry<span style=color:#f92672>.</span><span style=color:#a6e22e>getValue</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getResource</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//只删除主节点数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span><span style=color:#f92672>(!</span>isMater<span style=color:#f92672>(</span>jedis<span style=color:#f92672>)){</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>continue</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//finally close
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h2 id=redis-cluster的故障转移>Redis Cluster的故障转移<a class="anchor ms-1" href=#redis-cluster的故障转移><i class="fas fa-link"></i></a></h2><p>其他主节点对集群进行监控</p><h3 id=故障发现>故障发现<a class="anchor ms-1" href=#故障发现><i class="fas fa-link"></i></a></h3><ul><li><p>通过ping/pong 消息实现故障发现，不需要sentinel</p></li><li><p>主观下线：某个节点认为另一个节点不可用</p><p><img class=img-fluid alt=主观下线过程 src loading=lazy></p></li><li><p>客观下线：当半数以上持有槽的主节点都标记为某节点主管下线</p><p><img class=img-fluid alt=维护故障表 src loading=lazy></p><p><img class=img-fluid alt=客观下线过程 src loading=lazy></p></li></ul><h3 id=故障恢复>故障恢复<a class="anchor ms-1" href=#故障恢复><i class="fas fa-link"></i></a></h3><ul><li><p>从节点资格检查</p><p>1). 每个从节点坚检查与故障主节点的断线时间</p><p>2). <code>超过cluster-node-timeout*cluster-slave-validity-factory</code>就取消资格</p><p>3). <code>cluster-slave-validity-factory</code>默认为10</p></li><li><p>准备选举时间</p><p>1). 给偏移量最大的节点最长的选举时间</p><p>2). 把最接近master节点的从节点的选举延迟时间设置为最短</p></li><li><p>选举投票</p><p>1). 收集到master节点数/2+1票就可以替换主节点</p></li><li><p>替换主节点</p><p>1). <code>slaveof no one</code>当前从节点取消复制变为主节点</p><p>2). 执行<code>clusterDelSlot</code>撤销故障主节点负责的槽,并执行clusterAddSlot把这些槽分配给自己</p><p>3). 向集群中广播自己的pong消息,表明自己已经替换了故障从节点</p></li></ul><h2 id=rediscluster开发运维>RedisCluster开发运维<a class="anchor ms-1" href=#rediscluster开发运维><i class="fas fa-link"></i></a></h2><h3 id=集群完整性>集群完整性<a class="anchor ms-1" href=#集群完整性><i class="fas fa-link"></i></a></h3><ul><li><p><code>cluster-require-full-converge默认为yes</code></p><p>集群中16384个槽全部可用：保证集群完整性</p><p>节点故障或者正在故障转移，集群下线<code>(error)CLUSTERDOWN The cluster is down</code></p></li><li><p>大多数业务无法容忍，<code>cluster-require-full-converge</code>设置为no</p></li></ul><h3 id=带宽>带宽<a class="anchor ms-1" href=#带宽><i class="fas fa-link"></i></a></h3><ul><li><p>消息发送频率：节点发现与其他节点最后通信时间超过<code>cluster-node-timeout</code>会直接发送ping消息</p></li><li><p>消息数据量:slots槽数组（2KB空间）和整个集群1/10的状态数据（10个节点状态数据约1kb）</p></li><li><p>节点部署的机器规模：集群分布的机器越多且每台机器划分的节点数越均匀，则集群内整体的可用带宽越高</p></li></ul><h4 id=优化>优化<a class="anchor ms-1" href=#优化><i class="fas fa-link"></i></a></h4><ul><li><p>避免大集群：避免多业务使用一个集群，大业务可以多集群</p></li><li><p>cluster-node-timeout：和带宽和故障转移速度都有关，需要均衡</p></li><li><p>尽量均匀分配到多机器上，保证高可用和带宽</p></li></ul><h3 id=pubsub广播>Pub/Sub广播<a class="anchor ms-1" href=#pubsub广播><i class="fas fa-link"></i></a></h3><ul><li>publish在集群中每个节点广播：加重带宽</li></ul><h4 id=优化-1>优化<a class="anchor ms-1" href=#优化-1><i class="fas fa-link"></i></a></h4><ul><li>如果需要Pub/Sub，单独开启一套Redis Sentinel</li></ul><h3 id=集群倾斜>集群倾斜<a class="anchor ms-1" href=#集群倾斜><i class="fas fa-link"></i></a></h3><h4 id=数据倾斜内存在每个节点中分布不均>数据倾斜：内存在每个节点中分布不均<a class="anchor ms-1" href=#数据倾斜内存在每个节点中分布不均><i class="fas fa-link"></i></a></h4><ul><li><p>节点和槽分配不均</p><p>1). <code>redis-trib.rb info ip:port</code>查看节点，槽，键值分布</p><p>2). <code>redis-trib.rb rebalance ip:port</code>进行均衡</p></li><li><p>不同槽对应键值数量差异较大</p><p>1). CRC16正常情况下比较均匀</p><p>2). 可能存在hash_tag</p><p>3). cluster countkeysinslot {slot}获取槽对应键值个数</p></li><li><p>包含bigkey</p><p>1). 在从节点运行<code>redis-cli --bigkeys</code></p><p>2). 优化：优化数据结构</p></li><li><p>内存相关配置不一致（例如每个节点哈希优化不一致）</p><p>1). <code>hash-max-ziplist-value</code>,<code>set-max-intset-entries</code>的配置</p><p>2). 定期检查配置的一致性</p></li><li><p>客户端缓冲区大小</p></li><li><p>哈希表大小</p></li></ul><h4 id=请求倾斜某些节点访问量很高>请求倾斜：某些节点访问量很高<a class="anchor ms-1" href=#请求倾斜某些节点访问量很高><i class="fas fa-link"></i></a></h4><ul><li><p>热点key：重要的key或则bigkey</p><p>1). 避免bigkey</p><p>2). 热键不要用hash_tag</p><p>3). 当一致性需求不高时，可以使用本地缓存+MQ</p></li></ul><h3 id=读写分离>读写分离<a class="anchor ms-1" href=#读写分离><i class="fas fa-link"></i></a></h3><ul><li><p>只读连接：集群模式的从节点不接受任何读写请求</p><p>1). 在从节点get会重定向到负责槽的主节点</p><p>2).readonly命令可以读：连接连接命令</p></li><li><p>读写分离：更加复杂</p><p>1). 同样的问题：复制延迟，读取过期数据，从节点故障</p><p>2). 修改客户端：cluster slaves {nodeId}</p><p>3). 不建议使用</p></li></ul><h3 id=数据迁移>数据迁移<a class="anchor ms-1" href=#数据迁移><i class="fas fa-link"></i></a></h3><ul><li><p>官方迁移工具：<code>redis-trib.rb import --from ip:port{源节点} --copy ip:port{集群节点}</code></p><p>1).只能从单机迁移到集群</p><p>2).不支持在线迁移：source需要停写</p><p>3).不支持断点续传</p><p>4).单线程迁移：影响速度</p></li><li><p>在线迁移</p><p>有一个中转站，这个中转站会伪装成slave节点去拿到全量更新数据</p><p>1).redis-migrate-tool，唯品会</p><p>2).redis-port，豌豆荚</p></li></ul><h3 id=集群vs单机>集群vs单机<a class="anchor ms-1" href=#集群vs单机><i class="fas fa-link"></i></a></h3><ul><li><p>集群的限制</p><p>1). key批量操作支持有限，mget，mset必须在一个slot</p><p>2). key事务和lua支持有限：操作的key必须在一个节点</p><p>3). key时数据库分区的最小粒度：不支持bigkey分区</p><p>4). 不支持多个数据库：集群模式下只有一个db 0</p><p>5). 复制只支持直接复制，不能更改复制的拓扑结构（树）减小压力</p></li><li><p>Redis Cluster：满足容量和性能的扩展性，很多业务不需要</p><p>1). 客户端性能会降低</p><p>2). 命令无法跨节点用：mget。keys，scan，flush，sinter等</p><p>3).Lua和事务无法跨节点使用</p><p>4).客户端维护复杂</p></li><li><p>Redis Sentinel：满足高可用</p></li></ul><h2 id=总结>总结<a class="anchor ms-1" href=#总结><i class="fas fa-link"></i></a></h2><ol><li><p>Redis Cluster的分区规则</p></li><li><p>搭建集群的步骤</p></li><li><p>集群伸缩的步骤</p></li><li><p>smart客户端操作redis集群</p></li><li><p>集群自动故障转移</p></li></ol></div><div class="modal fade" id=rewardModal tabindex=-1 aria-labelledby=rewardModalLabel aria-hidden=true><div class=modal-dialog><div class="modal-content surface"><div class=modal-header><h5 class=modal-title id=rewardModalLabel><i class="fas fa-fw fa-coffee"></i>Buy me a coffee</h5><a href=# data-bs-dismiss=modal class="btn btn-sm btn-outline-primary" aria-label=Close><i class="fas fa-times"></i></a></div><div class=modal-body><ul class="nav nav-tabs mb-3" role=tablist><li class="nav-item text-nowrap" role=presentation><a class="nav-link active" id=reward-alipay-tab data-bs-toggle=tab href=#reward-alipay role=tab aria-controls=reward-alipay aria-selected=true><i class="fab fa-fw fa-alipay"></i>Alipay</a></li><li class="nav-item text-nowrap" role=presentation><a class=nav-link id=reward-wechat-tab data-bs-toggle=tab href=#reward-wechat role=tab aria-controls=reward-wechat aria-selected=true><i class="fab fa-fw fa-weixin"></i>WeChat</a></li></ul><div class=tab-content id=rewardTabContent><div class="tab-pane fade post-reward-content show active" id=reward-alipay role=tabpanel aria-labelledby=reward-alipay-tab><img class="img-fluid post-reward-img" src=https://euraxluo.github.io/images/picgo/_alipay.jpg loading=lazy></div><div class="tab-pane fade post-reward-content show" id=reward-wechat role=tabpanel aria-labelledby=reward-wechat-tab><img class="img-fluid post-reward-img" src=https://euraxluo.github.io/images/picgo/_wechatpay.jpg loading=lazy></div></div></div></div></div></div><hr><div class=post-copyright id=post-copyright><a class="d-flex align-items-center flex-column" target=_blank rel="license noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/deed.en><span><i class="fab fa-fw fa-2x fa-creative-commons"></i><i class="fab fa-fw fa-2x fa-creative-commons-by"></i><i class="fab fa-fw fa-2x fa-creative-commons-nc"></i></span>
CC BY-NC 4.0</a></div><hr><div class="post-navs d-flex mb-3 justify-content-evenly"><div class="post-nav post-prev"><i class="fas fa-fw fa-chevron-left"></i>
<a href=/posts/redis/redissentinel/>Redis Sentinel</a></div><div class="post-nav post-next"><a href=/posts/redis/rediscluster-2/>Redis Cluster 2</a>
<i class="fas fa-fw fa-chevron-right"></i></div></div></div></article><section class="related-posts row card component"><div class=card-header><h2 class=card-title>Related Posts</h2></div><div class=card-body><ul class=post-list><li><a href=/posts/redis/redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/>Redis API及数据结构</a>
<span class="float-end post-date">2019-03-10</span></li><li><a href=/posts/redis/rediscluster-1/>Redis Cluster</a>
<span class="float-end post-date">2019-03-10</span></li><li><a href=/posts/redis/rediscluster-2/>Redis Cluster 2</a>
<span class="float-end post-date">2019-03-10</span></li><li><a href=/posts/redis/redissentinel/>Redis Sentinel</a>
<span class="float-end post-date">2019-03-10</span></li><li><a href=/posts/redis/redis%E5%9F%BA%E7%A1%80/>Redis基础学习</a>
<span class="float-end post-date">2019-03-10</span></li><li><a href=/posts/redis/redis%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/>Redis的主从复制</a>
<span class="float-end post-date">2019-03-10</span></li></ul></div></section><div class="card component row post-comments" id=post-comments><div class=card-header><h2 class=card-title>Comments</h2></div><div class=card-body><script src=https://utteranc.es/client.js repo=Euraxluo/Euraxluo.github.io issue-term=pathname label=✨💬✨ theme=github-dark crossorigin=anonymous async></script></div></div></div></div><aside class="col-lg-4 sidebar d-flex"><div class=container><section class="card row text-center profile component"><div class=card-body><div class="col-12 d-flex align-items-center justify-content-center"><img class="profile-avatar rounded-circle" alt=Euraxluo src=https://euraxluo.github.io/images/picgo/profile.png loading=lazy></div><div class="col-12 profile-meta"><div class=profile-name>Euraxluo</div><div class=profile-bio>R&amp;D Engineer.</div><div class=profile-company><i class="fas fa-fw fa-building"></i>headingdata.com</div><div class=profile-location><i class="fas fa-fw fa-map-marker-alt"></i>Chengdu</div><div class=profile-about><i class="fas fa-fw fa-user"></i><a href=/about/>About</a></div></div></div></section><section class="featured-posts row card component"><div class=card-header><h2 class=card-title>Featured Posts</h2></div><div class=card-body><ul class=post-list><li><a href=/posts/note/java%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/>java面试笔记</a></li><li><a href=/posts/python/python-socket/>python socket编程</a></li><li><a href=/posts/note/rust%E5%AD%A6%E4%B9%A0/>rust学习</a></li><li><a href=/posts/note/scala%E5%85%A5%E9%97%A8/>Scala入门</a></li><li><a href=/posts/note/slam/>SLAM</a></li></ul></div></section><section class="recent-posts row card component"><div class=card-header><h2 class=card-title>Recent Posts</h2></div><div class=card-body><ul class=post-list><li><a href=/posts/note/caddy%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/>caddy简单使用</a></li><li><a href=/posts/note/%E5%AE%89%E8%A3%85k8s%E9%9B%86%E7%BE%A4/>安装K8S集群</a></li><li><a href=/posts/redis/redis%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/>Redis 实现分布式锁</a></li><li><a href=/posts/note/etcd%E5%85%A5%E9%97%A8/>etcd 基本使用</a></li><li><a href=/posts/note/gorm/>GORM学习</a></li></ul></div></section><section class="taxonomies row card component"><div class=card-header><h2 class=card-title><a href=/categories>Categories</a></h2></div><div class=card-body><div class=py-2><a href=/categories/notes/ class="badge rounded post-taxonomy" title=notes>notes
</a><a href=/categories/redis/ class="badge rounded post-taxonomy" title=redis>redis
</a><a href=/categories/java/ class="badge rounded post-taxonomy" title=java>java
</a><a href=/categories/%E7%88%AC%E8%99%AB/ class="badge rounded post-taxonomy" title=爬虫>爬虫
</a><a href=/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/ class="badge rounded post-taxonomy" title=读书笔记>读书笔记
</a><a href=/categories/architecture-design/ class="badge rounded post-taxonomy" title="architecture design">architecture design</a></div></div></section><section class="taxonomies row card component"><div class=card-header><h2 class=card-title><a href=/series>Series</a></h2></div><div class=card-body><div class=py-2><a href=/series/notes/ class="badge rounded post-taxonomy" title=notes>notes
</a><a href=/series/redis/ class="badge rounded post-taxonomy" title=redis>redis
</a><a href=/series/python/ class="badge rounded post-taxonomy" title=Python>Python
</a><a href=/series/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/ class="badge rounded post-taxonomy" title=读书笔记>读书笔记
</a><a href=/series/java/ class="badge rounded post-taxonomy" title=Java>Java
</a><a href=/series/jdbc/ class="badge rounded post-taxonomy" title=JDBC>JDBC</a></div></div></section><section class="taxonomies row card component"><div class=card-header><h2 class=card-title><a href=/tags>Tags</a></h2></div><div class=card-body><div class=py-2><a href=/tags/notes/ class="badge rounded post-taxonomy" title=notes>notes
</a><a href=/tags/redis/ class="badge rounded post-taxonomy" title=redis>redis
</a><a href=/tags/python/ class="badge rounded post-taxonomy" title=Python>Python
</a><a href=/tags/java/ class="badge rounded post-taxonomy" title=Java>Java
</a><a href=/tags/%E7%88%AC%E8%99%AB/ class="badge rounded post-taxonomy" title=爬虫>爬虫
</a><a href=/tags/architecture/ class="badge rounded post-taxonomy" title=architecture>architecture</a></div></div></section></div></aside></div></main><footer class="footer mt-auto py-3 text-center container-fluid"><nav class="social-links nav my-2 justify-content-center"><a class="nav-link social-link" href=mailto:Euraxluo@outlook.com title=Email><i class="fas fa-fw fa-2x fa-envelope"></i>
</a><a class="nav-link social-link" target=_blank href=https://github.com/Euraxluo title=GitHub rel="noopener noreferrer"><i class="fa-fw fa-2x fab fa-github"></i>
</a><a class="nav-link social-link" target=_blank href="http://wpa.qq.com/msgrd?v=3&amp;uin=1793939176&amp;site=qq&amp;menu=yes" title=QQ rel="noopener noreferrer"><i class="fa-fw fa-2x fab fa-qq"></i>
</a><a class="nav-link social-link" target=_blank href=https://www.zhihu.com/people/euraxluo title=Zhihu rel="noopener noreferrer"><i class="fa-fw fa-2x fab fa-zhihu"></i></a></nav><div class="copyright mb-2">Copyright © 2016-2023 Euraxluo. All Rights Reserved.</div></footer><script src=/js/main.min.353ac7952bbb8bdb7925c48cfcafede449a2253dd2610b49feb566a306011232.js integrity="sha256-NTrHlSu7i9t5JcSM/K/t5EmiJT3SYQtJ/rVmowYBEjI=" crossorigin=anonymous defer></script><script src=/js/icons.min.fb1b77be9bd37807602ec542d150423ad89114834c2e76ca7c004309310d64b0.js integrity="sha256-+xt3vpvTeAdgLsVC0VBCOtiRFINMLnbKfABDCTENZLA=" crossorigin=anonymous defer></script>
<script src=/js/viewer.min.4f0b78319199ad080a1331f64e868866ccf303199b8144d80003d6ba8a4e5feb.js integrity="sha256-Twt4MZGZrQgKEzH2ToaIZszzAxmbgUTYAAPWuopOX+s=" crossorigin=anonymous defer></script><script defer src=/js/katex.min.3e41bd190b6187a4854d279cbde0b8d47fd0b6aae6341bdee804717abe8f6d51.js integrity="sha256-PkG9GQthh6SFTSecveC41H/QtqrmNBve6ARxer6PbVE=" crossorigin=anonymous></script></body></html>